!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.LivechatVisitorSDK={})}(this,function(e){"use strict";function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e,t,r){if(!t(e))throw c("error","uncaught at check",r),Error(r)}function n(e,t){return xt.notUndef(e)&&bt.call(e,t)}function o(e,t){var r=e.indexOf(t);0>r||e.splice(r,1)}function a(){var e=it({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=new Promise(function(t,r){e.resolve=t,e.reject=r});return e.promise=t,e}function i(e){var t=1>=arguments.length||void 0===arguments[1]||arguments[1],r=void 0,n=new Promise(function(n){r=setTimeout(function(){return n(t)},e)});return n[pt]=function(){return clearTimeout(r)},n}function u(e){var t={name:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",next:e,throw:arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt,return:It};return arguments[3]&&(t[ft]=!0),"undefined"!=typeof Symbol&&(t[Symbol.iterator]=function(){return t}),t}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(r&&r.stack||r)):console[e](t,r)}function s(e,t){return function(){return e.apply(void 0,arguments)}}function f(e){return xt.channel(e)?"channel":Array.isArray(e)?e.map(function(e){return e+""})+"":e+""}function l(e,t){function r(t,r){if(o===Rt)return kt;if(r)throw o=Rt,r;n&&n(t);var a=e[o]();return o=a[0],n=a[2],o===Rt?kt:a[1]}var n=void 0,o=t;return u(r,function(e){return r(null,e)},arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",!0)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],r=Array(e),n=0,o=0,a=0,i=function(t){r[o]=t,o=(o+1)%e,n++},u=function(){if(0!=n){var t=r[a];return r[a]=null,n--,a=(a+1)%e,t}},c=function(){for(var e=[];n;)e.push(u());return e};return{isEmpty:function(){return 0==n},put:function(u){if(e>n)i(u);else{var s=void 0;switch(t){case Ct:throw Error(Pt);case Nt:r[o]=u,a=o=(o+1)%e;break;case Lt:s=2*e,r=c(),n=r.length,o=r.length,a=0,r.length=s,e=s,i(u)}}},take:u,flush:c}}function d(e){try{y(),e()}finally{m()}}function h(e){Wt.push(e),Ut||(y(),v())}function y(){Ut++}function m(){Ut--}function v(){m();for(var e=void 0;!Ut&&void 0!==(e=Wt.shift());)d(e)}function g(){var e=[];return{subscribe:function(t){return e.push(t),function(){return o(e,t)}},emit:function(t){for(var r=e.slice(),n=0,o=r.length;o>n;n++)r[n](t)}}}function b(){function e(){if(n&&a.length)throw Et("Cannot have a closed channel with pending takers");if(a.length&&!t.isEmpty())throw Et("Cannot have pending takers with non empty buffer")}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt.fixed(),n=!1,a=[];return r(t,xt.buffer,zt),{take:function(i){e(),r(i,xt.func,"channel.take's callback must be a function"),n&&t.isEmpty()?i(Bt):t.isEmpty()?(a.push(i),i.cancel=function(){return o(a,i)}):i(t.take())},put:function(o){if(e(),r(o,xt.notUndef,Gt),!n){if(!a.length)return t.put(o);for(var i=0;a.length>i;i++){var u=a[i];if(!u[lt]||u[lt](o))return a.splice(i,1),u(o)}}},flush:function(o){e(),r(o,xt.func,"channel.flush' callback must be a function"),o(n&&t.isEmpty()?Bt:t.flush())},close:function(){if(e(),!n&&(n=!0,a.length)){var t=a;a=[];for(var r=0,o=t.length;o>r;r++)t[r](Bt)}},get __takers__(){return a},get __closed__(){return n}}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dt.none(),n=arguments[2];arguments.length>2&&r(n,xt.func,"Invalid match function passed to eventChannel");var o=b(t),a=function(){o.__closed__||(i&&i(),o.close())},i=e(function(e){Vt(e)?a():n&&!n(e)||o.put(e)});if(o.__closed__&&i(),!xt.func(i))throw Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:o.take,flush:o.flush,close:a}}function _(e){var t=x(function(t){return e(function(e){e[dt]?t(e):h(function(){return t(e)})})});return Ft({},t,{take:function(e,n){arguments.length>1&&(r(n,xt.func,"channel.take's matcher argument must be a function"),e[lt]=n),t.take(e)}})}function w(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;r>o;o++)n[o-2]=arguments[o];var a={done:!1,value:S(e)},i=function(e){return{done:!1,value:O.apply(void 0,[t].concat(n,[e]))}},u=void 0,c=function(e){return u=e};return l({q1:function(){return["q2",a,c]},q2:function(){return u===Bt?[Rt]:["q1",i(u)]}},"q1","takeEvery("+f(e)+", "+t.name+")")}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&r(arguments[0],xt.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),xt.pattern(e))return rr(Ht,{pattern:e});if(xt.channel(e))return rr(Ht,{channel:e});throw Error("take(patternOrChannel): argument "+e+" is not valid channel or a valid pattern")}function j(e,t){return arguments.length>1?(r(e,xt.notUndef,"put(channel, action): argument channel is undefined"),r(e,xt.channel,"put(channel, action): argument "+e+" is not a valid channel"),r(t,xt.notUndef,"put(channel, action): argument action is undefined")):(r(e,xt.notUndef,"put(action): argument action is undefined"),t=e,e=null),rr(Kt,{channel:e,action:t})}function I(e){return rr($t,e)}function A(e){return rr(Yt,e)}function E(e,t,n){r(t,xt.notUndef,e+": argument fn is undefined");var o=null;if(xt.array(t)){var a=t;o=a[0],t=a[1]}else if(t.fn){var i=t;o=i.context,t=i.fn}return o&&xt.string(t)&&xt.func(o[t])&&(t=o[t]),r(t,xt.func,e+": argument "+t+" is not a function"),{context:o,fn:t,args:n}}function T(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];return rr(Qt,E("call",e,r))}function O(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];return rr(Zt,E("fork",e,r))}function k(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];var o=O.apply(void 0,[e].concat(r));return o[Zt].detached=!0,o}function R(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(t.length>1)return I(t.map(function(e){return R(e)}));var o=t[0];return 1===t.length&&(r(o,xt.notUndef,"cancel(task): argument task is undefined"),r(o,xt.task,"cancel(task): argument "+o+" is not a valid Task object "+tr)),rr(Jt,o||ht)}function P(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];return 0===arguments.length?e=gt:(r(e,xt.notUndef,"select(selector,[...]): argument selector is undefined"),r(e,xt.func,"select(selector,[...]): argument "+e+" is not a function")),rr(Xt,{selector:e,args:n})}function C(e,t){return r(e,xt.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(r(t,xt.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),r(t,xt.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),rr(er,{pattern:e,buffer:t})}function N(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;r>o;o++)n[o-2]=arguments[o];return O.apply(void 0,[w,e,t].concat(n))}function L(e,t){for(var r in t){var n=t[r];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r,n)}return e}function M(e){return("*"===e?pr.wildcard:xt.array(e)?pr.array:xt.stringableFunc(e)?pr.default:xt.func(e)?pr.predicate:pr.default)(e)}function D(e,t,r){function n(e){i(),r(e,!0)}function a(e){u.push(e),e.cont=function(a,i){s||(o(u,e),e.cont=vt,i?n(a):(e===t&&(c=a),u.length||(s=!0,r(c))))}}function i(){s||(s=!0,u.forEach(function(e){e.cont=vt,e.cancel()}),u=[])}var u=[],c=void 0,s=!1;return a(t),{addTask:a,cancelAll:i,abort:n,getTasks:function(){return u},taskNames:function(){return u.map(function(e){return e.name})}}}function W(e){var t=e.context,r=e.fn,n=e.args;if(xt.iterator(r))return r;var o=void 0,a=void 0;try{o=r.apply(t,n)}catch(e){a=e}return xt.iterator(o)?o:u(a?function(){throw a}:function(){var e=void 0,t={done:!1,value:o},r=function(e){return{done:!0,value:e}};return function(n){return e?r(n):(e=!0,t)}}())}function U(e){function t(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,X.cancelAll(),i(lr))}function n(t,r){if(!J.isRunning)throw Error("Trying to resume an already finished generator");try{var o=void 0;r?o=e.throw(t):t===lr?(J.isCancelled=!0,n.cancel(),o=xt.func(e.return)?e.return(lr):{done:!0,value:lr}):o=t===fr?xt.func(e.return)?e.return():{done:!0}:e.next(t),o.done?(J.isMainRunning=!1,J.cont&&J.cont(o.value)):u(o.value,V,"",n)}catch(e){J.isCancelled&&$("error","uncaught at "+z,e.message),J.isMainRunning=!1,J.cont(e,!0)}}function i(t,r){e._isRunning=!1,Y.close(),r?(t instanceof Error&&(t.sagaStack="at "+z+" \n "+(t.sagaStack||t.stack)),Z.cont||($("error","uncaught",t.sagaStack||t.stack),t instanceof Error&&K&&K(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),Z.cont&&Z.cont(t,r),Z.joiners.forEach(function(e){return e.cb(t,r)}),Z.joiners=null}function u(e,t){function r(e,t){i||(i=!0,o.cancel=vt,H&&(t?H.effectRejected(a,e):H.effectResolved(a,e)),o(e,t))}var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments[3],a=St();H&&H.effectTriggered({effectId:a,parentEffectId:t,label:n,effect:e});var i=void 0;r.cancel=vt,o.cancel=function(){if(!i){i=!0;try{r.cancel()}catch(e){$("error","uncaught at "+z,e.message)}r.cancel=vt,H&&H.effectCancelled(a)}};var u=void 0;return xt.promise(e)?f(e,r):xt.helper(e)?b(dr(e),a,r):xt.iterator(e)?l(e,a,z,r):xt.array(e)?q(e,a,r):(u=ar.take(e))?p(u,r):(u=ar.put(e))?d(u,r):(u=ar.all(e))?j(u,a,r):(u=ar.race(e))?I(u,a,r):(u=ar.call(e))?m(u,a,r):(u=ar.cps(e))?g(u,r):(u=ar.fork(e))?b(u,a,r):(u=ar.join(e))?w(u,r):(u=ar.cancel(e))?S(u,r):(u=ar.select(e))?A(u,r):(u=ar.actionChannel(e))?E(u,r):(u=ar.flush(e))?O(u,r):(u=ar.cancelled(e))?T(u,r):(u=ar.getContext(e))?k(u,r):(u=ar.setContext(e))?R(u,r):r(e)}function f(e,t){var r=e[pt];xt.func(r)?t.cancel=r:xt.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,function(e){return t(e,!0)})}function l(e,t,r,n){U(e,P,C,N,Q,B,t,r,n)}function p(e,t){var r=e.channel,n=e.pattern,o=e.maybe;r=r||Y;var a=function(e){return e instanceof Error?t(e,!0):t(Vt(e)&&!o?fr:e)};try{r.take(a,M(n))}catch(e){return t(e,!0)}t.cancel=a.cancel}function d(e,t){var r=e.channel,n=e.action,o=e.resolve;h(function(){var e=void 0;try{e=(r?r.put:C)(n)}catch(e){if(r||o)return t(e,!0);$("error","uncaught at "+z,e.stack||e.message||e)}if(!o||!xt.promise(e))return t(e);f(e,t)})}function m(e,t,r){var n=e.context,o=e.fn,a=e.args,i=void 0;try{i=o.apply(n,a)}catch(e){return r(e,!0)}return xt.promise(i)?f(i,r):xt.iterator(i)?l(i,t,o.name,r):r(i)}function g(e,t){var r=e.context,n=e.fn,o=e.args;try{var a=function(e,r){return xt.undef(e)?t(r):t(e,!0)};n.apply(r,o.concat(a)),a.cancel&&(t.cancel=function(){return a.cancel()})}catch(e){return t(e,!0)}}function b(e,t,r){var n=e.fn,o=e.detached,a=W({context:e.context,fn:n,args:e.args});try{y();var i=U(a,P,C,N,Q,B,t,n.name,o?null:vt);o?r(i):a._isRunning?(X.addTask(i),r(i)):a._error?X.abort(a._error):r(i)}finally{v()}}function w(e,t){if(e.isRunning()){var r={task:Z,cb:t};t.cancel=function(){return o(e.joiners,r)},e.joiners.push(r)}else e.isAborted()?t(e.error(),!0):t(e.result())}function S(e,t){e===ht&&(e=Z),e.isRunning()&&e.cancel(),t()}function j(e,t,r){function n(){a===o.length&&(i=!0,r(xt.array(e)?wt.from(ur({},c,{length:o.length})):c))}var o=Object.keys(e);if(!o.length)return r(xt.array(e)?[]:{});var a=0,i=void 0,c={},s={};o.forEach(function(e){var t=function(t,o){i||(o||Vt(t)||t===fr||t===lr?(r.cancel(),r(t,o)):(c[e]=t,a++,n()))};t.cancel=vt,s[e]=t}),r.cancel=function(){i||(i=!0,o.forEach(function(e){return s[e].cancel()}))},o.forEach(function(r){return u(e[r],t,r,s[r])})}function I(e,t,r){var n=void 0,o=Object.keys(e),a={};o.forEach(function(e){var t=function(t,o){if(!n)if(o)r.cancel(),r(t,!0);else if(!Vt(t)&&t!==fr&&t!==lr){var a;r.cancel(),n=!0,r((a={},a[e]=t,a))}};t.cancel=vt,a[e]=t}),r.cancel=function(){n||(n=!0,o.forEach(function(e){return a[e].cancel()}))},o.forEach(function(r){n||u(e[r],t,r,a[r])})}function A(e,t){var r=e.selector,n=e.args;try{var o=r.apply(void 0,[N()].concat(n));t(o)}catch(e){t(e,!0)}}function E(e,t){var r=e.pattern,n=e.buffer,o=M(r);o.pattern=r,t(x(P,n||Dt.fixed(),o))}function T(e,t){t(!!J.isCancelled)}function O(e,t){e.flush(t)}function k(e,t){t(Q[e])}function R(e,t){_t.assign(Q,e),t()}var P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return vt},C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt,N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vt,F=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},V=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,z=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",G=arguments[8];r(e,xt.iterator,sr);var q=s(j,At("[...effects]","all([...effects])")),H=B.sagaMonitor,K=B.onError,$=B.logger||c,Y=_(P),Q=Object.create(F);n.cancel=vt;var Z=function(e,n,o,i){var u,c;return o._deferredEnd=null,u={},u[st]=!0,u.id=e,u.name=n,c={},c.done=c.done||{},c.done.get=function(){if(o._deferredEnd)return o._deferredEnd.promise;var e=a();return o._deferredEnd=e,o._isRunning||(o._error?e.reject(o._error):e.resolve(o._result)),e.promise},u.cont=i,u.joiners=[],u.cancel=t,u.isRunning=function(){return o._isRunning},u.isCancelled=function(){return o._isCancelled},u.isAborted=function(){return o._isAborted},u.result=function(){return o._result},u.error=function(){return o._error},u.setContext=function(e){r(e,xt.object,Tt("task",e)),_t.assign(Q,e)},L(u,c),u}(V,z,e,G),J={name:z,cancel:function(){J.isRunning&&!J.isCancelled&&(J.isCancelled=!0,n(lr))},isRunning:!0},X=D(z,J,i);return G&&(G.cancel=t),e._isRunning=!0,n(),Z}function F(e){var t=xr.call(e,wr),r=e[wr];try{e[wr]=void 0;var n=!0}catch(e){}var o=_r.call(e);return n&&(t?e[wr]=r:delete e[wr]),o}function B(e){return Sr.call(e)}function V(e){return null==e?void 0===e?Ir:jr:Ar&&Ar in Object(e)?F(e):B(e)}function z(e){return null!=e&&"object"==(void 0===e?"undefined":Tr(e))}function G(e){if(!z(e)||V(e)!=Or)return!1;var t=Er(e);if(null===t)return!0;var r=Rr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&kr.call(r)==Pr}function q(e,t,r){function n(){l===f&&(l=f.slice())}function o(){return s}function a(e){if("function"!=typeof e)throw Error("Expected listener to be a function.");var t=!0;return n(),l.push(e),function(){if(t){t=!1,n();var r=l.indexOf(e);l.splice(r,1)}}}function i(e){if(!G(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw Error("Reducers may not dispatch actions.");try{p=!0,s=c(s,e)}finally{p=!1}for(var t=f=l,r=0;t.length>r;r++)(0,t[r])();return e}var u;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw Error("Expected the enhancer to be a function.");return r(q)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var c=e,s=t,f=[],l=f,p=!1;return i({type:Lr.INIT}),u={dispatch:i,subscribe:a,getState:o,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");c=e,i({type:Lr.INIT})}},u[Cr]=function(){var e,t=a;return e={subscribe:function(e){function r(){e.next&&e.next(o())}if("object"!==(void 0===e?"undefined":Nr(e)))throw new TypeError("Expected the observer to be an object.");return r(),{unsubscribe:t(r)}}},e[Cr]=function(){return this},e},u}function H(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function K(e,t){return 2==t?function(t,r){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function $(e,t){return 2==t?function(t,r){return e(t,r)}:function(t){return e(t)}}function Y(e){for(var t=e?e.length:0,r=Array(t);t--;)r[t]=e[t];return r}function Q(e){return function(t){return e({},t)}}function Z(e,t){return function(){for(var r=arguments.length,n=r-1,o=Array(r);r--;)o[r]=arguments[r];var a=o[t],i=o.slice(0,t);return a&&Ur.apply(i,a),t!=n&&Ur.apply(i,o.slice(t+1)),e.apply(this,i)}}function J(e,t){return function(){var r=arguments.length;if(r){for(var n=Array(r);r--;)n[r]=arguments[r];var o=n[0]=t.apply(void 0,n);return e.apply(void 0,n),o}}}function X(e,t,r,n){function o(e,t){if(v.cap){var r=Dr.iterateeRearg[e];if(r)return l(t,r);var n=!y&&Dr.iterateeAry[e];if(n)return f(t,n)}return t}function a(e,t,r){return g||v.curry&&r>1?E(t,r):t}function i(e,t,r){if(v.fixed&&(b||!Dr.skipFixed[e])){var n=Dr.methodSpread[e],o=n&&n.start;return void 0===o?j(t,r):Z(t,o)}return t}function u(e,t,r){return v.rearg&&r>1&&(x||!Dr.skipRearg[e])?P(t,Dr.methodRearg[e]||Dr.aryRearg[r]):t}function c(e,t){for(var r=-1,n=(t=N(t)).length,o=n-1,a=A(Object(e)),i=a;null!=i&&++r<n;){var u=t[r],c=i[u];null!=c&&(i[t[r]]=A(r==o?c:Object(c))),i=i[u]}return a}function s(e,t){var r=Dr.aliasToReal[e]||e,o=Dr.remap[r]||r,a=n;return function(e){var n=y?w:S,i=y?w[o]:t,u=I(I({},a),e);return X(n,r,i,u)}}function f(e,t){return p(e,function(e){return"function"==typeof e?$(e,t):e})}function l(e,t){return p(e,function(e){var r=t.length;return K(P($(e,r),t),r)})}function p(e,t){return function(){var r=arguments.length;if(!r)return e();for(var n=Array(r);r--;)n[r]=arguments[r];var o=v.rearg?0:r-1;return n[o]=t(n[o]),e.apply(void 0,n)}}function d(e,t){var r,n=Dr.aliasToReal[e]||e,f=t,l=M[n];return l?f=l(t):v.immutable&&(Dr.mutate.array[n]?f=J(t,Y):Dr.mutate.object[n]?f=J(t,Q(t)):Dr.mutate.set[n]&&(f=J(t,c))),T(L,function(e){return T(Dr.aryMethod[e],function(t){if(n==t){var c=Dr.methodSpread[n];return r=c&&c.afterRearg?i(n,u(n,f,e),e):u(n,i(n,f,e),e),r=o(n,r),r=a(n,r,e),!1}}),!r}),r||(r=f),r==t&&(r=g?E(r,1):function(){return t.apply(this,arguments)}),r.convert=s(n,t),Dr.placeholder[n]&&(h=!0,r.placeholder=t.placeholder=_),r}var h,y="function"==typeof t,m=t===Object(t);if(m&&(n=r,r=t,t=void 0),null==r)throw new TypeError;n||(n={});var v={cap:!("cap"in n)||n.cap,curry:!("curry"in n)||n.curry,fixed:!("fixed"in n)||n.fixed,immutable:!("immutable"in n)||n.immutable,rearg:!("rearg"in n)||n.rearg},g="curry"in n&&n.curry,b="fixed"in n&&n.fixed,x="rearg"in n&&n.rearg,_=y?r:Wr,w=y?r.runInContext():void 0,S=y?r:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isFunction:e.isFunction,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},j=S.ary,I=S.assign,A=S.clone,E=S.curry,T=S.forEach,O=S.isArray,k=S.isFunction,R=S.keys,P=S.rearg,C=S.toInteger,N=S.toPath,L=R(Dr.aryMethod),M={castArray:function(e){return function(){var t=arguments[0];return O(t)?e(Y(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[1],r=e(arguments[0],t),n=r.length;return v.cap&&"number"==typeof t?(t=t>2?t-2:1,n&&t>=n?r:$(r,t)):r}},mixin:function(e){return function(t){var r=this;if(!k(r))return e(r,Object(t));var n=[];return T(R(t),function(e){k(t[e])&&n.push([e,r.prototype[e]])}),e(r,Object(t)),T(n,function(e){var t=e[1];k(t)?r.prototype[e[0]]=t:delete r.prototype[e[0]]}),r}},nthArg:function(e){return function(t){var r=0>t?1:C(t)+1;return E(e(t),r)}},rearg:function(e){return function(t,r){var n=r?r.length:0;return E(e(t,r),n)}},runInContext:function(t){return function(r){return X(e,t(r),n)}}};if(!m)return d(t,r);var D=r,W=[];return T(L,function(e){T(Dr.aryMethod[e],function(e){var t=D[Dr.remap[e]||e];t&&W.push([e,d(e,t)])})}),T(R(D),function(e){var t=D[e];if("function"==typeof t){for(var r=W.length;r--;)if(W[r][0]==e)return;t.convert=s(e,t),W.push([e,t])}}),T(W,function(e){D[e[0]]=e[1]}),D.convert=function(e){return D.runInContext.convert(e)(void 0)},h&&(D.placeholder=_),T(R(D),function(e){T(Dr.realToAlias[e]||[],function(t){D[t]=D[e]})}),D}function ee(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Wn,this.__views__=[]}function te(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function re(e){if(Kn(e)&&!qn(e)&&!(e instanceof Un)){if(e instanceof Gn)return e;if(Qn.call(e,"__wrapped__"))return Yn(e)}return new Gn(e)}function ne(e,t,r,n,o,a,i,u,c,s){function f(){for(var v=arguments.length,g=Array(v),b=v;b--;)g[b]=arguments[b];if(h)var x=Oo(f),_=Mn(g,x);if(n&&(g=Cn(g,n,o,h)),a&&(g=Ln(g,a,i,h)),v-=_,h&&s>v){var w=Mo(g,x);return To(e,t,ne,f.placeholder,r,g,w,u,c,s-v)}var S=p?r:this,j=d?S[e]:e;return v=g.length,u?g=No(g,u):y&&v>1&&g.reverse(),l&&v>c&&(g.length=c),this&&this!==Hr&&this instanceof f&&(j=m||Tn(j)),j.apply(S,g)}var l=t&Bo,p=t&Do,d=t&Wo,h=t&(Uo|Fo),y=t&Vo,m=d?void 0:Tn(e);return f}function oe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ae(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ue(e){var t=this.__data__=new ii(e);this.size=t.size}function ce(e,t,r,n,o,a){var i,u=t&Mu,c=t&Du,s=t&Wu;if(r&&(i=o?r(e,n,o,a):r(e)),void 0!==i)return i;if(!un(e))return e;var f=qn(e);if(f){if(i=Qi(e),!u)return $n(e,i)}else{var l=$i(e),p=l==Fu||l==Bu;if(Ua(e))return Ii(e,u);if(l==Vu||l==Uu||p&&!o){if(i=c||p?{}:Lu(e),!u)return c?Li(e,ji(i,e)):Ri(e,ni(i,e))}else{if(!zu[l])return o?e:{};i=Nu(e,l,ce,u)}}a||(a=new bi);var d=a.get(e);if(d)return d;a.set(e,i);var h=s?c?Wi:Di:c?keysIn:ri,y=f?void 0:h(e);return po(y||e,function(n,o){y&&(n=e[o=n]),Oa(i,o,ce(n,t,r,o,e,a))}),i}function se(e,t,r){var n=ja(e,Hu,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=se.placeholder,n}function fe(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new vi;++t<r;)this.add(e[t])}function le(e,t,r,n,o){return e===t||(null==e||null==t||!Kn(e)&&!Kn(t)?e!=e&&t!=t:Ic(e,t,r,n,le,o))}function pe(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Wc);var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(pe.Cache||vi),r}function de(e){if("string"==typeof e)return e;if(qn(e))return qc(e,de)+"";if(oa(e))return $c?$c.call(e):"";var t=e+"";return"0"==t&&1/e==-Hc?"-0":t}function he(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=ys),o||(o=[]);++a<i;){var u=e[a];t>0&&r(u)?t>1?he(u,t-1,r,n,o):Pi(o,u):n||(o[o.length]=u)}return o}function ye(e,t,r,n,o){e!==t&&Ws(t,function(a,i){if(un(a))o||(o=new bi),pf(e,t,i,r,ye,n,o);else{var u=n?n(e[i],a,i+"",e,t,o):void 0;void 0===u&&(u=a),sf(e,i,u)}},Si)}function me(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;n>a;a++)o[a-2]=arguments[a];var i=void 0;xt.iterator(e)?(i=e,e=t):(r(t,xt.func,jf),r(i=t.apply(void 0,o),xt.iterator,jf));var u=e,c=u.subscribe,s=u.dispatch,f=u.getState,l=u.context,p=u.sagaMonitor,d=u.logger,h=u.onError,y=St();p&&(p.effectTriggered=p.effectTriggered||vt,p.effectResolved=p.effectResolved||vt,p.effectRejected=p.effectRejected||vt,p.effectCancelled=p.effectCancelled||vt,p.actionDispatched=p.actionDispatched||vt,p.effectTriggered({effectId:y,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:o}}));var m=U(i,c,Ot(s),f,l,{sagaMonitor:p,logger:d,onError:h},y,t.name);return p&&p.effectResolved(y,m),m}function ve(e,t){var r={};for(var n in e)0>t.indexOf(n)&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function ge(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.apply(void 0,[e].concat(r));case 2:if(void 0===(o=t.sent)){t.next=5;break}return t.abrupt("return",o);case 5:return t.next=7,S("*");case 7:t.next=0;break;case 8:case"end":return t.stop()}},Wf,this)}function be(){var e,t,r,n,o,a,i;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,P(_f.getPropertyLicense);case 2:return e=u.sent,u.next=5,P(_f.getPropertyGroup);case 5:return t=u.sent,u.next=8,P(wf);case 8:return r=u.sent,u.next=11,P(_f.getPropertyStaticConfigVersion);case 11:return n=u.sent,u.next=14,T(Bl,n,{environment:r,license:e,group:t});case 14:return o=u.sent,a=Ds("order"),i=qf("order",o.offline_form.fields).map(a),u.next=19,j(ef.setPropertyTicketForm(i));case 19:case"end":return u.stop()}},Ml,this)}function xe(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P(_f.getPropertyVisitorData);case 2:return t=n.sent,r=Ll({},t),n.next=6,j(ef.setPropertyStaticConfigVersion(e.static_config_version));case 6:if(e.visitor.nick&&(r.name=e.visitor.nick),e.visitor.params&&(r.customProperties=Ll({},r.customParams,Ul(e.visitor.params))),!e.visitor.nick&&!e.visitor.params){n.next=11;break}return n.next=11,j(ef.setPropertyVisitorData(r));case 11:return n.next=13,j(ef.setPropertyVisitorId(e.visitor.session));case 13:case"end":return n.stop()}},Dl,this)}function _e(){var e,t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,P(_f.getPropertyLicense);case 2:return e=o.sent,o.next=5,P(_f.getPropertyGroup);case 5:return t=o.sent,o.next=8,P(wf);case 8:return r=o.sent,o.next=11,T(Fl,{environment:r,license:e,group:t});case 11:return n=o.sent,o.next=14,T(xe,n);case 14:case"end":return o.stop()}},Wl,this)}function we(){var e,t,r,n,o,a,u,c,s,f,l,p,d,h,y;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:e=3,t=!0,r=null;case 3:return m.next=6,T(ge,_f.getPropertyVisitorId);case 6:return n=m.sent,m.next=9,P(_f.getPropertyLicense);case 9:return o=m.sent,m.next=12,P(_f.getPropertyGroup);case 12:return a=m.sent,m.next=15,P(_f.getPropertyVisitorData);case 15:return u=m.sent,c=t||r!==u,m.next=19,P(wf);case 19:return s=m.sent,f=ep(c,n,a,u),m.prev=21,m.next=24,T(Cl,"ping",{license:o,environment:s,body:f},{retry:10});case 24:if(l=m.sent,e=l.next_ping_delay||3,!c){m.next=30;break}return p=Jl({},u),m.next=30,j(Hl(p));case 30:return r=u,m.next=33,P(_f.getPropertyConnectionStatus);case 33:if("connected"===(d=m.sent)){m.next=37;break}return m.next=37,j(ef.setPropertyConnectionStatus("connected"));case 37:h=t,t=!!l.next_ping_send_full_details,!h&&t&&(e=0),m.next=50;break;case 42:return m.prev=42,m.t0=m.catch(21),m.next=46,P(_f.getPropertyConnectionStatus);case 46:if("disconnected"===(y=m.sent)){m.next=50;break}return m.next=50,j(ef.setPropertyConnectionStatus("disconnected"));case 50:return m.next=52,A([T(i,1e3*e),S(ef.setPropertyVisitorData.getActionName())]);case 52:m.next=3;break;case 54:case"end":return m.stop()}},Xl,this,[[21,42]])}function Se(){var e,t,r,n,o,a,u,c,s,f;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=3,P(_f.getPropertyLicense);case 3:return e=l.sent,l.next=6,P(_f.getPropertyGroup);case 6:return t=l.sent,l.next=9,T(ge,_f.getPropertyVisitorId);case 9:return r=l.sent,l.next=12,P(wf);case 12:return n=l.sent,o={visitor:{id:r},skill:t,random_id:Math.random()+""},l.prev=14,l.next=17,T(Cl,"status_ping",{license:e,environment:n,body:o},{retry:10});case 17:return a=l.sent,l.next=20,P(_f.getPropertyChatStatus);case 20:return u=l.sent,c=rp(a),l.next=24,P(_f.getPropertyConnectionStatus);case 24:if("connected"===(s=l.sent)){l.next=28;break}return l.next=28,j(ef.setPropertyConnectionStatus("connected"));case 28:if(u===c){l.next=31;break}return l.next=31,j(ef.setPropertyChatStatus(c));case 31:l.next=41;break;case 33:return l.prev=33,l.t0=l.catch(14),l.next=37,P(_f.getPropertyConnectionStatus);case 37:if("disconnected"===(f=l.sent)){l.next=41;break}return l.next=41,j(ef.setPropertyConnectionStatus("disconnected"));case 41:return l.next=43,T(i,3e3);case 43:l.next=0;break;case 45:case"end":return l.stop()}},tp,this,[[14,33]])}function je(e){var t,r,n,o,a,i=e.customId,u=e.text;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(_f.getPropertyLicense);case 2:return t=e.sent,e.next=5,T(ge,_f.getPropertyVisitorId);case 5:return r=e.sent,e.next=8,P(_f.getPropertySecuredToken);case 8:return n=e.sent,e.next=11,P(wf);case 11:return o=e.sent,a={environment:o,license:t,securedToken:n,body:{author:"visitor",message:u,message_id:i,random_id:i,visitor:{id:r}}},e.next=15,T(Cl,"send_message",a);case 15:case 16:case"end":return e.stop()}},np,this)}function Ie(e){var t,r,n,o,a,i,u,c,s=e.customId,f=e.text;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(_f.getPropertyLicense);case 2:return t=e.sent,e.next=5,P(_f.getPropertyGroup);case 5:return r=e.sent,e.next=8,T(ge,_f.getPropertyVisitorId);case 8:return n=e.sent,e.next=11,P(_f.getPropertyVisitorData);case 11:return o=e.sent,e.next=14,P(wf);case 14:return a=e.sent,i={group:r,source_group:r,details:"",details_labels:"",from_manual_invitation:!1,integration_params:"",random_id:s,trigger_unique_id:"",version:"Embedded",custom_variables:{},welcome_message:"",is_mobile:!1,return_secured_session_id:!1,visitor:{id:n,nick:o.name||"Client",email:o.email||""}},f&&(i.visitor_message=f,i.visitor_message_id=s),o.customProperties&&(i.custom_variables=o.customProperties),u={license:t,environment:a,body:i},e.next=21,T(Cl,"start_chat",u);case 21:if(!(c=e.sent).secured_token){e.next=28;break}return e.next=25,j(ef.setPropertySecuredToken(c.secured_token));case 25:return e.next=27,j(ef.setPropertyChatState(cp));case 27:up.setItem("securedToken",c.secured_token);case 28:case"end":return e.stop()}},fp,this)}function Ae(){var e,t,r,n,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P(_f.getPropertyLicense);case 2:return e=a.sent,a.next=5,T(ge,_f.getPropertyVisitorId);case 5:return t=a.sent,a.next=8,P(_f.getPropertySecuredToken);case 8:return r=a.sent,a.next=11,P(wf);case 11:return n=a.sent,o={environment:n,license:e,securedToken:r,body:{source:"visitor",random_id:Math.random()+"",visitor:{id:t}}},a.next=15,T(Cl,"close_chat",o);case 15:return a.abrupt("return",a.sent);case 16:case"end":return a.stop()}},lp,this)}function Ee(e){var t,r,n,o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,T(ge,_f.getPropertyChatState);case 2:if(t=i.sent,r=e.payload,n=r.customId,o=r.text,i.prev=4,t===cp){i.next=10;break}return i.next=8,T(Ie,{customId:n,text:o});case 8:i.next=12;break;case 10:return i.next=12,T(je,{customId:n,text:o});case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(4),e.payload.promise.reject({type:"connection",reason:"Request failed"});case 17:return i.next=19,S(function(e){return e.type===zl.getActionName()&&dp("payload.customId",e)===n});case 19:e.payload.promise.resolve({id:(a=i.sent).payload.id,timestamp:a.payload.timestamp});case 21:case"end":return i.stop()}},zp,this,[[4,14]])}function Te(e){var t,r,n,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P(_f.getPropertyVisitorData);case 2:return t=a.sent,r=wp(yp,Ep(["name","email","pageUrl","pageTitle","customProperties"],e.payload)),n=jp(t,r),a.next=7,j(ef.setPropertyVisitorData(n));case 7:return a.next=9,S(Hl.getActionName());case 9:e.payload.promise.resolve((o=a.sent).payload);case 11:case"end":return a.stop()}},Gp,this)}function Oe(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(ef.setPropertySneakPeek(e.payload.text));case 2:e.payload.promise.resolve({success:!0});case 3:case"end":return t.stop()}},qp,this)}function ke(e){var t,r,n,o,a,i;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,P(_f.getPropertyLicense);case 2:return t=u.sent,u.next=5,P(wf);case 5:return r=u.sent,u.next=8,T(ge,_f.getPropertyVisitorId);case 8:return n=u.sent,u.next=11,P(_f.getPropertyChatId);case 11:return o=u.sent,u.next=14,P(_f.getPropertySecuredToken);case 14:if(a=u.sent,o){u.next=18;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to forward transcript"}),u.abrupt("return");case 18:return i=Bp("forwardChatTranscript",{visitorId:n,chatId:o,email:e.payload.email}),u.prev=19,u.next=22,T(Nl,r,t,i,a);case 22:u.next=28;break;case 24:return u.prev=24,u.t0=u.catch(19),e.payload.promise.reject({type:"connection",reason:"Request failed"}),u.abrupt("return");case 28:e.payload.promise.resolve({success:!0});case 29:case"end":return u.stop()}},Hp,this,[[19,24]])}function Re(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P(_f.getPropertyChatId);case 2:if(t=r.sent){r.next=6;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to close"}),r.abrupt("return");case 6:return r.prev=6,r.next=9,T(Ae);case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(6),e.payload.promise.reject({type:"connection",reason:"Request failed"}),r.abrupt("return");case 15:return r.next=17,S(Gl.getActionName());case 17:e.payload.promise.resolve({success:!0});case 18:case"end":return r.stop()}},Kp,this,[[6,11]])}function Pe(e){var t,r,n,o,a,i;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,P(_f.getPropertyLicense);case 2:return t=u.sent,u.next=5,P(wf);case 5:return r=u.sent,u.next=8,T(ge,_f.getPropertyVisitorId);case 8:return n=u.sent,u.next=11,P(_f.getPropertyChatId);case 11:return o=u.sent,u.next=14,P(_f.getPropertySecuredToken);case 14:if(a=u.sent,o){u.next=18;break}return e.payload.promise.reject({type:"state",reason:"There is no chat to rate"}),u.abrupt("return");case 18:return i=Bp("rateChat",{visitorId:n,chatId:o,rate:e.payload.rate}),u.prev=19,u.next=22,T(Nl,r,t,i,a);case 22:u.next=28;break;case 24:return u.prev=24,u.t0=u.catch(19),e.payload.promise.reject({type:"connection",reason:"Request failed"}),u.abrupt("return");case 28:return u.next=30,S(Ql.getActionName());case 30:if(!e.payload.comment){u.next=40;break}return u.prev=31,u.next=34,T(Cl,"send_rating_comment",{environment:r,license:t,securedToken:a,body:{comment:e.payload.comment,conference_id:o,random_id:Math.random()+"",visitor:{id:n}}});case 34:u.next=40;break;case 36:return u.prev=36,u.t1=u.catch(31),e.payload.promise.reject({type:"connection",reason:"Rate Comment request failed"}),u.abrupt("return");case 40:e.payload.promise.resolve({success:!0});case 41:case"end":return u.stop()}},$p,this,[[19,24],[31,36]])}function Ce(e){var t,r=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(_f.getPropertyChatState);case 2:if((t=e.sent)!==cp){e.next=6;break}return r.promise.reject({type:"state",reason:"You can't disconnect during the chat"}),e.abrupt("return");case 6:r.promise.resolve({success:!0});case 7:case"end":return e.stop()}},Yp,this)}function Ne(e){var t,r=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(_f.getPropertyTicketForm);case 2:if(t=e.sent){e.next=15;break}return e.prev=4,e.next=7,T(be);case 7:return e.next=9,P(_f.getPropertyTicketForm);case 9:t=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",r.promise.reject({type:"connection",reason:"Request failed"}));case 15:return e.abrupt("return",r.promise.resolve({fields:t}));case 16:case"end":return e.stop()}},Qp,this,[[4,12]])}function Le(e){var t,r,n=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(ge,_f.getPropertyVisitorId);case 2:return e.next=4,P(_f.getPropertyVisitorData);case 4:return t=e.sent,r=Vp({},t),e.abrupt("return",n.promise.resolve(r));case 7:case"end":return e.stop()}},Zp,this)}function Me(e){var t,r,n,o,a,i,u=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(wf);case 2:return t=e.sent,e.next=5,P(_f.getPropertyLicense);case 5:return r=e.sent,e.next=8,T(ge,_f.getPropertyVisitorId);case 8:return n=e.sent,e.next=11,P(_f.getPropertyGroup);case 11:return o=e.sent,e.next=14,P(_f.getPropertyVisitorData);case 14:return a=e.sent,i={group:o,licence_id:r,ticket_message:u.message,offline_message:u.message,requester:{mail:u.email,name:u.name},subject:u.subject,visitor_id:n},a.pageUrl&&(i.source={url:a.pageUrl}),e.prev=17,e.next=20,T(Pl,"v2/tickets/new",{environment:t,license:r,body:i});case 20:u.promise.resolve({success:!0}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(17),u.promise.reject({type:"connection",reason:"Request failed"});case 26:case"end":return e.stop()}},Jp,this,[[17,23]])}function De(){var e,t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,N(td.getActionName(),Te);case 2:return r.next=4,N(cd.getActionName(),Ne);case 4:return r.next=6,N(sd.getActionName(),Me);case 6:return r.next=8,N(nd.getActionName(),Pe);case 8:return r.next=10,N(od.getActionName(),Oe);case 10:return r.next=12,N(id.getActionName(),Re);case 12:return r.next=14,N(ad.getActionName(),ke);case 14:return r.next=16,N(ud.getActionName(),Ce);case 16:return r.next=18,N(rd.getActionName(),Le);case 18:return r.next=20,C(ed.getActionName(),Dt.expanding());case 20:e=r.sent;case 21:return r.next=24,S(e);case 24:return t=r.sent,r.next=27,T(Ee,t);case 27:r.next=21;break;case 29:case"end":return r.stop()}},Xp,this)}function We(e){var t,r=e.emitter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(ge,_f.getPropertyChatId);case 2:return t=e.sent,r.emit(fd,{chatId:t}),e.next=6,S(Gl.getActionName());case 6:r.emit(pd);case 7:case"end":return e.stop()}},xd,this)}function Ue(e,t){e.emitter.emit(hd,{status:t.payload.data.toLowerCase()})}function Fe(e,t){e.emitter.emit(yd,{status:t.payload.data.toLowerCase()})}function Be(e,t){var r,n,o,a=e.emitter,i=t.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(ge,_f.getPropertyChatId);case 2:return r=e.sent,e.next=5,P(_f.getPropertyVisitorId);case 5:n=e.sent,o={id:i.id,timestamp:i.timestamp,authorId:"visitor"===i.authorType?n:i.authorId,text:i.text,chatId:r},void 0!==i.isMobile&&(o.isMobile=i.isMobile),void 0!==i.customId&&(o.customId=i.customId),a.emit(ld,o);case 10:case"end":return e.stop()}},_d,this)}function Ve(e,t){var r,n,o=e.emitter,a=t.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(_f.getPropertyVisitorId);case 2:r=e.sent,o.emit(md,n={id:a.id,timestamp:a.timestamp,authorId:"visitor"===a.authorType?r:a.authorId,url:a.url,contentType:a.contentType,size:a.size});case 5:case"end":return e.stop()}},wd,this)}function ze(e,t){var r=e.emitter,n=t.payload,o={name:n.name,id:n.id};n.avatarUrl&&(o.avatarUrl=n.avatarUrl),n.jobTitle&&(o.jobTitle=n.jobTitle),r.emit(dd,o)}function Ge(e,t){var r=t.payload;e.emitter.emit(vd,{numberInQueue:r.numberInQueue,waitingTime:r.waitingTime})}function qe(e,t){var r=t.payload;e.emitter.emit(gd,{authorId:r.authorId,isTyping:r.isTyping})}function He(e){var t,r=e.emitter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(ef.setPropertyVisitorId.getActionName());case 2:r.emit(bd,{id:(t=e.sent).payload.data});case 4:case"end":return e.stop()}},Sd,this)}function Ke(e){var t=e.emitter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(He,{emitter:t});case 2:return e.next=4,N(Vl.getActionName(),We,{emitter:t});case 4:return e.next=6,N(ef.setPropertyChatStatus.getActionName(),Ue,{emitter:t});case 6:return e.next=8,N(ef.setPropertyConnectionStatus.getActionName(),Fe,{emitter:t});case 8:return e.next=10,N(zl.getActionName(),Be,{emitter:t});case 10:return e.next=12,N(Kl.getActionName(),Ve,{emitter:t});case 12:return e.next=14,N(ql.getActionName(),ze,{emitter:t});case 14:return e.next=16,N($l.getActionName(),Ge,{emitter:t});case 16:return e.next=18,N(Yl.getActionName(),qe,{emitter:t});case 18:case"end":return e.stop()}},jd,this)}function $e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(ef.setPropertyChatState(sp));case 2:return e.next=4,j(ef.removePropertySecuredToken());case 4:up.removeItem("securedToken");case 5:case"end":return e.stop()}},ah,this)}function Ye(){var e,t,r,n,o,a,i,u;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,P(_f.getPropertyLicense);case 2:return e=c.sent,c.next=5,P(_f.getPropertyGroup);case 5:return t=c.sent,c.next=8,T(ge,_f.getPropertyVisitorId);case 8:return r=c.sent,c.next=11,P(_f.getPropertySecuredToken);case 11:return n=c.sent,c.next=14,P(wf);case 14:if(o=c.sent,!n){c.next=40;break}return a={random_id:Math.random()+"",visitor:{id:r,group:t}},c.prev=17,c.next=20,T(Cl,"get_pending_messages",{environment:o,license:e,securedToken:n,body:a});case 20:if(!(i=c.sent).messages){c.next=26;break}return c.next=24,j(ef.setPropertyChatState(cp));case 24:c.next=28;break;case 26:return c.next=28,T($e);case 28:c.next=38;break;case 30:return c.prev=30,c.t0=c.catch(17),c.next=34,P(_f.getPropertyConnectionStatus);case 34:if("disconnected"===(u=c.sent)){c.next=38;break}return c.next=38,j(ef.setPropertyConnectionStatus("disconnected"));case 38:c.next=42;break;case 40:return c.next=42,j(ef.setPropertyChatState(sp));case 42:case"end":return c.stop()}},ih,this,[[17,30]])}function Qe(){var e,t,r,n,o,a,u,c,s,f,l,p,d,h;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=3,P(_f.getPropertyLicense);case 3:return e=y.sent,y.next=6,P(_f.getPropertyGroup);case 6:return t=y.sent,y.next=9,T(ge,_f.getPropertyVisitorId);case 9:return r=y.sent,y.next=12,P(_f.getPropertySecuredToken);case 12:return n=y.sent,y.next=15,P(_f.getPropertyChatState);case 15:return o=y.sent,y.next=18,P(wf);case 18:return a=y.sent,y.next=21,P(_f.getPropertySneakPeek);case 21:if(u=y.sent,!n||o!==cp){y.next=61;break}return y.next=25,P(_f.getPropertyLastMessageId);case 25:return c=y.sent,s={random_id:Math.random()+"",visitor:{id:r,group:t},last_unique_id:null},c&&(s.last_unique_id=c),fh!==u&&(s.sneak_peek=u),y.prev=29,y.next=32,T(Cl,"get_pending_messages",{environment:a,license:e,securedToken:n,body:s});case 32:return f=y.sent,y.next=35,P(_f.getPropertyConnectionStatus);case 35:if("connected"===(l=y.sent)){y.next=39;break}return y.next=39,j(ef.setPropertyConnectionStatus("connected"));case 39:if(f.messages){y.next=44;break}return y.next=42,T($e);case 42:y.next=51;break;case 44:return p=dh(f),y.next=47,I(p.map(function(e){return j(Id({name:e.name,message:e}))}));case 47:if(!(d=ph(f.messages))){y.next=51;break}return y.next=51,j(ef.setPropertyLastMessageId(d));case 51:y.next=61;break;case 53:return y.prev=53,y.t0=y.catch(29),y.next=57,P(_f.getPropertyConnectionStatus);case 57:if("disconnected"===(h=y.sent)){y.next=61;break}return y.next=61,j(ef.setPropertyConnectionStatus("disconnected"));case 61:return fh=u,y.next=64,T(i,1800);case 64:y.next=0;break;case 66:case"end":return y.stop()}},uh,this,[[29,53]])}function Ze(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(ge,_f.getPropertyChatState);case 2:return e.next=4,T(Qe);case 4:return e.next=6,N(ef.setPropertyChatState.getActionName(),Qe);case 6:case"end":return e.stop()}},ch,this)}function Je(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(Ye);case 2:return e.next=4,k(Ze);case 4:case"end":return e.stop()}},sh,this)}function Xe(e){var t,r,n=e.payload;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=n.message).timestamp*=1e3,e.t0=t.name,e.next=e.t0===yh?5:e.t0===hh?11:e.t0===Wp.RATE_CHAT?14:e.t0===mh?17:e.t0===Wp.NEW_AGENT_MESSAGE?20:e.t0===Wp.CHAT_ENDED?23:e.t0===Wp.NEW_AGENT?31:e.t0===Wp.VISITOR_QUEUED?40:e.t0===Wp.TYPING_INDICATOR?43:46;break;case 5:return e.next=7,j(Vl({securedToken:Is(up.getItem("securedToken"),"securedToken",n)}));case 7:if(!t.data.visitorMessage){e.next=10;break}return e.next=10,j(zl({id:t.uniqueId,timestamp:t.timestamp,authorType:"visitor",text:t.data.visitorMessage,customId:t.data.randomId}));case 10:return e.abrupt("break",47);case 11:return e.next=13,j(zl({id:t.uniqueId,timestamp:t.timestamp,authorType:"visitor",text:t.data.message,customId:t.data.randomId}));case 13:return e.abrupt("break",47);case 14:return e.next=16,j(Ql({id:t.uniqueId,timestamp:t.timestamp,rate:t.data.rate,comment:t.data.comment}));case 16:return e.abrupt("break",47);case 17:return e.next=19,j(Kl({id:t.uniqueId,timestamp:t.timestamp,authorId:t.data.author.login||"visitor",authorType:t.data.author.type,url:t.data.files[0].url,size:t.data.files[0].size,contentType:t.data.files[0]["content-type"]}));case 19:return e.abrupt("break",47);case 20:return e.next=22,j(zl({id:t.uniqueId,timestamp:t.timestamp,authorType:"agent",text:t.data.message,isMobile:t.data.isMobile,authorId:t.data.authorId}));case 22:return e.abrupt("break",47);case 23:return e.next=25,j(Gl());case 25:return e.next=27,j(ef.setPropertyChatState(sp));case 27:return e.next=29,j(ef.removePropertySecuredToken());case 29:return up.removeItem("securedToken"),e.abrupt("break",47);case 31:return e.next=33,j(ql({id:t.data.id,name:t.data.name,jobTitle:t.data.jobTitle,avatarUrl:t.data.avatarUrl}));case 33:return e.next=35,P(_f.getPropertyChatId);case 35:if(r=e.sent){e.next=39;break}return e.next=39,j(ef.setPropertyChatId(t.data.chatId));case 39:return e.abrupt("break",47);case 40:return e.next=42,j($l({numberInQueue:t.data.numberInQueue,waitingTime:t.data.waitingTime}));case 42:return e.abrupt("break",47);case 43:return e.next=45,j(Yl({authorId:t.data.authorId,isTyping:t.data.isTyping}));case 45:return e.abrupt("break",47);case 46:return e.abrupt("return");case 47:case"end":return e.stop()}},vh,this)}function et(){var e,t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C(Id.getActionName(),Dt.expanding());case 2:e=r.sent;case 3:return r.next=6,S(e);case 6:return t=r.sent,r.next=9,T(Xe,t);case 9:r.next=3;break;case 11:case"end":return r.stop()}},gh,this)}function tt(){var e,t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Uf(O(Se));case 3:return e=n.sent,n.next=6,Uf(O(Je));case 6:return t=n.sent,n.next=9,Uf(O(we));case 9:return r=n.sent,n.next=12,S(Lf.getActionName());case 12:return n.next=14,R(e,t,r);case 14:return n.next=16,S(_h,tt);case 16:n.next=0;break;case 18:case"end":return n.stop()}},bh,this)}function rt(e){var t=e.emitter;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uf(O(_e));case 2:return e.next=4,Uf(O(De));case 4:return e.next=6,Uf(O(Ke,{emitter:t}));case 6:return e.next=8,Uf(O(et));case 8:return e.next=10,Uf(O(tt));case 10:case"end":return e.stop()}},xh,this)}function nt(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t,r){(e[t]||[]).map(function(e){e(r)}),(e["*"]||[]).map(function(e){e(t,r)})}}}var ot="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},at=(t(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){function n(e,t,r,n){var o=Object.create((t&&t.prototype instanceof a?t:a).prototype),i=new h(n||[]);return o._invoke=f(e,r,i),o}function o(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function a(){}function i(){}function u(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function n(r,a,i,u){var c=o(e[r],e,a);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"===(v===f?"undefined":t(f))&&b.call(f,"__await")?Promise.resolve(f.__await).then(function(e){n("next",e,i,u)},function(e){n("throw",e,i,u)}):Promise.resolve(f).then(function(e){s.value=e,i(s)},u)}u(c.arg)}"object"===t(r.process)&&r.process.domain&&(n=r.process.domain.bind(n));var a;this._invoke=function(e,t){function r(){return new Promise(function(r,o){n(e,t,r,o)})}return a=a?a.then(r,r):r()}}function f(e,t,r){var n=A;return function(a,i){if(n===T)throw Error("Generator is already running");if(n===O){if("throw"===a)throw i;return m()}for(r.method=a,r.arg=i;;){var u=r.delegate;if(u){var c=l(u,r);if(c){if(c===k)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===A)throw n=O,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=T;var s=o(e,t,r);if("normal"===s.type){if(n=r.done?O:E,s.arg===k)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=O,r.method="throw",r.arg=s.arg)}}}function l(e,t){var r=e.iterator[t.method];if(r===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,l(e,t),"throw"===t.method))return k;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var n=o(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,k;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,k):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,k)}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(p,this),this.reset(!0)}function y(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=v,t.done=!0,t};return n.next=n}}return{next:m}}function m(){return{value:v,done:!0}}var v,g=Object.prototype,b=g.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},_=x.iterator||"@@iterator",w=x.asyncIterator||"@@asyncIterator",S=x.toStringTag||"@@toStringTag",j="object"===t(e),I=r.regeneratorRuntime;if(I)j&&(e.exports=I);else{(I=r.regeneratorRuntime=j?e.exports:{}).wrap=n;var A="suspendedStart",E="suspendedYield",T="executing",O="completed",k={},R={};R[_]=function(){return this};var P=Object.getPrototypeOf,C=P&&P(P(y([])));C&&C!==g&&b.call(C,_)&&(R=C);var N=u.prototype=a.prototype=Object.create(R);i.prototype=N.constructor=u,u.constructor=i,u[S]=i.displayName="GeneratorFunction",I.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},I.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(N),e},I.awrap=function(e){return{__await:e}},c(s.prototype),s.prototype[w]=function(){return this},I.AsyncIterator=s,I.async=function(e,t,r,o){var a=new s(n(e,t,r,o));return I.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},c(N),N[S]="Generator",N[_]=function(){return this},N.toString=function(){return"[object Generator]"},I.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},I.values=y,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=v),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return t("end");if(this.prev>=o.tryLoc){var i=b.call(o,"catchLoc"),u=b.call(o,"finallyLoc");if(i&&u){if(o.catchLoc>this.prev)return t(o.catchLoc,!0);if(o.finallyLoc>this.prev)return t(o.finallyLoc)}else if(i){if(o.catchLoc>this.prev)return t(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(o.finallyLoc>this.prev)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(this.prev>=n.tryLoc&&b.call(n,"finallyLoc")&&n.finallyLoc>this.prev){var o=n;break}}!o||"break"!==e&&"continue"!==e||o.tryLoc>t||t>o.finallyLoc||(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,k):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),k},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),k}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;d(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=v),k}}}}("object"===(void 0===ot?"undefined":t(ot))?ot:"object"===("undefined"==typeof window?"undefined":t(window))?window:"object"===("undefined"==typeof self?"undefined":t(self))?self:ot)}),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),it=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ut="function"==typeof Symbol&&"symbol"===at(Symbol.iterator)?function(e){return void 0===e?"undefined":at(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":at(e)},ct=function(e){return"@@redux-saga/"+e},st=ct("TASK"),ft=ct("HELPER"),lt=ct("MATCH"),pt=ct("CANCEL_PROMISE"),dt=ct("SAGA_ACTION"),ht=ct("SELF_CANCELLATION"),yt=function(e){return function(){return e}},mt=yt(!0),vt=(yt(!1),function(){}),gt=function(e){return e},bt=Object.prototype.hasOwnProperty,xt={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!xt.array(e)&&"object"===(void 0===e?"undefined":ut(e))},promise:function(e){return e&&xt.func(e.then)},iterator:function(e){return e&&xt.func(e.next)&&xt.func(e.throw)},iterable:function(e){return e&&xt.func(Symbol)?xt.func(e[Symbol.iterator]):xt.array(e)},task:function(e){return e&&e[st]},observable:function(e){return e&&xt.func(e.subscribe)},buffer:function(e){return e&&xt.func(e.isEmpty)&&xt.func(e.take)&&xt.func(e.put)},pattern:function(e){return e&&(xt.string(e)||"symbol"===(void 0===e?"undefined":ut(e))||xt.func(e)||xt.array(e))},channel:function(e){return e&&xt.func(e.take)&&xt.func(e.close)},helper:function(e){return e&&e[ft]},stringableFunc:function(e){return xt.func(e)&&n(e,"toString")}},_t={assign:function(e,t){for(var r in t)n(t,r)&&(e[r]=t[r])}},wt={from:function(e){var t=Array(e.length);for(var r in e)n(e,r)&&(t[r]=e[r]);return t}},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),jt=function(e){throw e},It=function(e){return{value:e,done:!0}},At=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},Et=function(e){return Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},Tt=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},Ot=function(e){return function(t){return e(Object.defineProperty(t,dt,{value:!0}))}},kt={done:!0,value:void 0},Rt={},Pt="Channel's Buffer overflow!",Ct=1,Nt=3,Lt=4,Mt={isEmpty:mt,put:vt,take:vt},Dt={none:function(){return Mt},fixed:function(e){return p(e,Ct)},dropping:function(e){return p(e,2)},sliding:function(e){return p(e,Nt)},expanding:function(e){return p(e,Lt)}},Wt=[],Ut=0,Ft=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bt={type:"@@redux-saga/CHANNEL_END"},Vt=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type},zt="invalid buffer passed to channel factory function",Gt="Saga was provided with an undefined action",qt=ct("IO"),Ht="TAKE",Kt="PUT",$t="ALL",Yt="RACE",Qt="CALL",Zt="FORK",Jt="CANCEL",Xt="SELECT",er="ACTION_CHANNEL",tr="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",rr=function(e,t){var r;return r={},r[qt]=!0,r[e]=t,r};S.maybe=function(){var e=S.apply(void 0,arguments);return e[Ht].maybe=!0,e};j.resolve=function(){var e=j.apply(void 0,arguments);return e[Kt].resolve=!0,e},j.sync=s(j.resolve,At("put.sync","put.resolve"));var nr,or=function(e){return function(t){return t&&t[qt]&&t[e]}},ar={take:or(Ht),put:or(Kt),all:or($t),race:or(Yt),call:or(Qt),cps:or("CPS"),fork:or(Zt),join:or("JOIN"),cancel:or(Jt),select:or(Xt),actionChannel:or(er),cancelled:or("CANCELLED"),flush:or("FLUSH"),getContext:or("GET_CONTEXT"),setContext:or("SET_CONTEXT")},ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cr="function"==typeof Symbol&&"symbol"===ir(Symbol.iterator)?function(e){return void 0===e?"undefined":ir(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":ir(e)},sr="proc first argument (Saga function result) must be an iterator",fr={toString:function(){return"@@redux-saga/CHANNEL_END"}},lr={toString:function(){return"@@redux-saga/TASK_CANCEL"}},pr={wildcard:function(){return mt},default:function(e){return"symbol"===(void 0===e?"undefined":cr(e))?function(t){return t.type===e}:function(t){return t.type===e+""}},array:function(e){return function(t){return e.some(function(e){return M(e)(t)})}},predicate:function(e){return function(t){return e(t)}}},dr=function(e){return{fn:e}},hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr="object"==("undefined"==typeof global?"undefined":hr(global))&&global&&global.Object===Object&&global,mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr="object"==("undefined"==typeof self?"undefined":mr(self))&&self&&self.Object===Object&&self,gr=(yr||vr||Function("return this")()).Symbol,br=Object.prototype,xr=br.hasOwnProperty,_r=br.toString,wr=gr?gr.toStringTag:void 0,Sr=Object.prototype.toString,jr="[object Null]",Ir="[object Undefined]",Ar=gr?gr.toStringTag:void 0,Er=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or="[object Object]",kr=Function.prototype.toString,Rr=Object.prototype.hasOwnProperty,Pr=kr.call(Object),Cr=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}(nr="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr={INIT:"@@redux/INIT"},Mr=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dr=t(function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.placeholder={bind:!0,bindKey:!0,curry:!0,curryRight:!0,partial:!0,partialRight:!0},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,r=t.aliasToReal,n={};for(var o in r){var a=r[o];e.call(n,a)?n[a].push(o):n[a]=[o]}return n}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}}),Wr={},Ur=Array.prototype.push,Fr=X,Br=function(e){return e},Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zr="object"==(void 0===ot?"undefined":Vr(ot))&&ot&&ot.Object===Object&&ot,Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr="object"==("undefined"==typeof self?"undefined":Gr(self))&&self&&self.Object===Object&&self,Hr=zr||qr||Function("return this")(),Kr=Hr.Symbol,$r=Object.prototype,Yr=$r.hasOwnProperty,Qr=$r.toString,Zr=Kr?Kr.toStringTag:void 0,Jr=function(e){var t=Yr.call(e,Zr),r=e[Zr];try{e[Zr]=void 0;var n=!0}catch(e){}var o=Qr.call(e);return n&&(t?e[Zr]=r:delete e[Zr]),o},Xr=Object.prototype.toString,en=function(e){return Xr.call(e)},tn="[object Null]",rn="[object Undefined]",nn=Kr?Kr.toStringTag:void 0,on=function(e){return null==e?void 0===e?rn:tn:nn&&nn in Object(e)?Jr(e):en(e)},an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un=function(e){var t=void 0===e?"undefined":an(e);return null!=e&&("object"==t||"function"==t)},cn="[object AsyncFunction]",sn="[object Function]",fn="[object GeneratorFunction]",ln="[object Proxy]",pn=function(e){if(!un(e))return!1;var t=on(e);return t==sn||t==fn||t==cn||t==ln},dn=Hr["__core-js_shared__"],hn=function(){var e=/[^.]+$/.exec(dn&&dn.keys&&dn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),yn=function(e){return!!hn&&hn in e},mn=Function.prototype.toString,vn=function(e){if(null!=e){try{return mn.call(e)}catch(e){}try{return e+""}catch(e){}}return""},gn=/^\[object .+?Constructor\]$/,bn=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xn=function(e){return!(!un(e)||yn(e))&&(pn(e)?bn:gn).test(vn(e))},_n=function(e,t){return null==e?void 0:e[t]},wn=function(e,t){var r=_n(e,t);return xn(r)?r:void 0},Sn=wn(Hr,"WeakMap"),jn=Sn&&new Sn,In=jn?function(e,t){return jn.set(e,t),e}:Br,An=Object.create,En=function(){function e(){}return function(t){if(!un(t))return{};if(An)return An(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Tn=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=En(e.prototype),n=e.apply(r,t);return un(n)?n:r}},On=1,kn=function(e,t,r){function n(){return(this&&this!==Hr&&this instanceof n?a:e).apply(o?r:this,arguments)}var o=t&On,a=Tn(e);return n},Rn=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Pn=Math.max,Cn=function(e,t,r,n){for(var o=-1,a=e.length,i=r.length,u=-1,c=t.length,s=Pn(a-i,0),f=Array(c+s),l=!n;++u<c;)f[u]=t[u];for(;++o<i;)(l||a>o)&&(f[r[o]]=e[o]);for(;s--;)f[u++]=e[o++];return f},Nn=Math.max,Ln=function(e,t,r,n){for(var o=-1,a=e.length,i=-1,u=r.length,c=-1,s=t.length,f=Nn(a-u,0),l=Array(f+s),p=!n;++o<f;)l[o]=e[o];for(var d=o;++c<s;)l[d+c]=t[c];for(;++i<u;)(p||a>o)&&(l[d+r[i]]=e[o++]);return l},Mn=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n},Dn=function(){},Wn=4294967295;(ee.prototype=En(Dn.prototype)).constructor=ee;var Un=ee,Fn=jn?function(e){return jn.get(e)}:function(){},Bn={},Vn=Object.prototype.hasOwnProperty,zn=function(e){for(var t=e.name+"",r=Bn[t],n=Vn.call(Bn,t)?r.length:0;n--;){var o=r[n],a=o.func;if(null==a||a==e)return o.name}return t};(te.prototype=En(Dn.prototype)).constructor=te;var Gn=te,qn=Array.isArray,Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn=function(e){return null!=e&&"object"==(void 0===e?"undefined":Hn(e))},$n=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},Yn=function(e){if(e instanceof Un)return e.clone();var t=new Gn(e.__wrapped__,e.__chain__);return t.__actions__=$n(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Qn=Object.prototype.hasOwnProperty;(re.prototype=Dn.prototype).constructor=re;var Zn=re,Jn=function(e){var t=zn(e),r=Zn[t];if("function"!=typeof r||!(t in Un.prototype))return!1;if(e===r)return!0;var n=Fn(r);return!!n&&e===n[0]},Xn=800,eo=16,to=Date.now,ro=function(e){var t=0,r=0;return function(){var n=to(),o=eo-(n-r);if(r=n,o>0){if(++t>=Xn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},no=ro(In),oo=/\{\n\/\* \[wrapped with (.+)\] \*/,ao=/,? & /,io=function(e){var t=e.match(oo);return t?t[1].split(ao):[]},uo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,co=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(uo,"{\n/* [wrapped with "+t+"] */\n")},so=function(e){return function(){return e}},fo=function(){try{var e=wn(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),lo=ro(fo?function(e,t){return fo(e,"toString",{configurable:!0,enumerable:!1,value:so(t),writable:!0})}:Br),po=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},ho=function(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1},yo=function(e){return e!=e},mo=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1},vo=function(e,t,r){return t==t?mo(e,t,r):ho(e,yo,r)},go=function(e,t){return!!(null==e?0:e.length)&&vo(e,t,0)>-1},bo=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],xo=function(e,t){return po(bo,function(r){var n="_."+r[0];t&r[1]&&!go(e,n)&&e.push(n)}),e.sort()},_o=function(e,t,r){var n=t+"";return lo(e,co(n,xo(io(n),r)))},wo=1,So=2,jo=4,Io=8,Ao=32,Eo=64,To=function(e,t,r,n,o,a,i,u,c,s){var f=t&Io;t|=f?Ao:Eo,(t&=~(f?Eo:Ao))&jo||(t&=~(wo|So));var l=[e,t,o,f?a:void 0,f?i:void 0,f?void 0:a,f?void 0:i,u,c,s],p=r.apply(void 0,l);return Jn(e)&&no(p,l),p.placeholder=n,_o(p,e,t)},Oo=function(e){return e.placeholder},ko=9007199254740991,Ro=/^(?:0|[1-9]\d*)$/,Po=function(e,t){return!!(t=null==t?ko:t)&&("number"==typeof e||Ro.test(e))&&e>-1&&e%1==0&&t>e},Co=Math.min,No=function(e,t){for(var r=e.length,n=Co(t.length,r),o=$n(e);n--;){var a=t[n];e[n]=Po(a,r)?o[a]:void 0}return e},Lo="__lodash_placeholder__",Mo=function(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var i=e[r];i!==t&&i!==Lo||(e[r]=Lo,a[o++]=r)}return a},Do=1,Wo=2,Uo=8,Fo=16,Bo=128,Vo=512,zo=ne,Go=function(e,t,r){function n(){for(var a=arguments.length,i=Array(a),u=a,c=Oo(n);u--;)i[u]=arguments[u];var s=3>a&&i[0]!==c&&i[a-1]!==c?[]:Mo(i,c);return a-=s.length,r>a?To(e,t,zo,n.placeholder,void 0,i,s,void 0,void 0,r-a):Rn(this&&this!==Hr&&this instanceof n?o:e,this,i)}var o=Tn(e);return n},qo=1,Ho=function(e,t,r,n){function o(){for(var t=-1,u=arguments.length,c=-1,s=n.length,f=Array(s+u),l=this&&this!==Hr&&this instanceof o?i:e;++c<s;)f[c]=n[c];for(;u--;)f[c++]=arguments[++t];return Rn(l,a?r:this,f)}var a=t&qo,i=Tn(e);return o},Ko="__lodash_placeholder__",$o=1,Yo=2,Qo=4,Zo=8,Jo=128,Xo=256,ea=Math.min,ta=function(e,t){var r=e[1],n=t[1],o=r|n;if(($o|Yo|Jo)<=o&&!(n==Jo&&r==Zo||n==Jo&&r==Xo&&t[8]>=e[7].length||n==(Jo|Xo)&&t[8]>=t[7].length&&r==Zo))return e;n&$o&&(e[2]=t[2],o|=r&$o?0:Qo);var a=t[3];if(a){var i=e[3];e[3]=i?Cn(i,a,t[4]):a,e[4]=i?Mo(e[3],Ko):t[4]}return(a=t[5])&&(e[5]=(i=e[5])?Ln(i,a,t[6]):a,e[6]=i?Mo(e[5],Ko):t[6]),(a=t[7])&&(e[7]=a),n&Jo&&(e[8]=null==e[8]?t[8]:ea(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e},ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na="[object Symbol]",oa=function(e){return"symbol"==(void 0===e?"undefined":ra(e))||Kn(e)&&on(e)==na},aa=NaN,ia=/^\s+|\s+$/g,ua=/^[-+]0x[0-9a-f]+$/i,ca=/^0b[01]+$/i,sa=/^0o[0-7]+$/i,fa=parseInt,la=function(e){if("number"==typeof e)return e;if(oa(e))return aa;if(un(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=un(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ia,"");var r=ca.test(e);return r||sa.test(e)?fa(e.slice(2),r?2:8):ua.test(e)?aa:+e},pa=1/0,da=1.7976931348623157e308,ha=function(e){return e?(e=la(e))===pa||e===-pa?(0>e?-1:1)*da:e==e?e:0:0===e?e:0},ya=function(e){var t=ha(e),r=t%1;return t==t?r?t-r:t:0},ma="Expected a function",va=1,ga=2,ba=8,xa=16,_a=32,wa=64,Sa=Math.max,ja=function(e,t,r,n,o,a,i,u){var c=t&ga;if(!c&&"function"!=typeof e)throw new TypeError(ma);var s=n?n.length:0;if(s||(t&=~(_a|wa),n=o=void 0),i=void 0===i?i:Sa(ya(i),0),u=void 0===u?u:ya(u),s-=o?o.length:0,t&wa){var f=n,l=o;n=o=void 0}var p=c?void 0:Fn(e),d=[e,t,r,n,o,f,l,a,i,u];if(p&&ta(d,p),e=d[0],t=d[1],r=d[2],n=d[3],o=d[4],!(u=d[9]=void 0===d[9]?c?0:e.length:Sa(d[9]-s,0))&&t&(ba|xa)&&(t&=~(ba|xa)),t&&t!=va)h=t==ba||t==xa?Go(e,t,u):t!=_a&&t!=(va|_a)||o.length?zo.apply(void 0,d):Ho(e,t,r,n);else var h=kn(e,t,r);return _o((p?In:no)(h,d),e,t)},Ia=128,Aa=function(e,t,r){"__proto__"==t&&fo?fo(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Ea=function(e,t){return e===t||e!=e&&t!=t},Ta=Object.prototype.hasOwnProperty,Oa=function(e,t,r){var n=e[t];Ta.call(e,t)&&Ea(n,r)&&(void 0!==r||t in e)||Aa(e,t,r)},ka=function(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var u=t[a],c=n?n(r[u],e[u],u,r,e):void 0;void 0===c&&(c=e[u]),o?Aa(r,u,c):Oa(r,u,c)}return r},Ra=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},Pa="[object Arguments]",Ca=function(e){return Kn(e)&&on(e)==Pa},Na=Object.prototype,La=Na.hasOwnProperty,Ma=Na.propertyIsEnumerable,Da=Ca(function(){return arguments}())?Ca:function(e){return Kn(e)&&La.call(e,"callee")&&!Ma.call(e,"callee")},Wa=function(){return!1},Ua=t(function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="object"==r(t)&&t&&!t.nodeType&&t,o=n&&"object"==r(e)&&e&&!e.nodeType&&e,a=o&&o.exports===n?Hr.Buffer:void 0;e.exports=(a?a.isBuffer:void 0)||Wa}),Fa=9007199254740991,Ba=function(e){return"number"==typeof e&&e>-1&&e%1==0&&Fa>=e},Va={};Va["[object Float32Array]"]=Va["[object Float64Array]"]=Va["[object Int8Array]"]=Va["[object Int16Array]"]=Va["[object Int32Array]"]=Va["[object Uint8Array]"]=Va["[object Uint8ClampedArray]"]=Va["[object Uint16Array]"]=Va["[object Uint32Array]"]=!0,Va["[object Arguments]"]=Va["[object Array]"]=Va["[object ArrayBuffer]"]=Va["[object Boolean]"]=Va["[object DataView]"]=Va["[object Date]"]=Va["[object Error]"]=Va["[object Function]"]=Va["[object Map]"]=Va["[object Number]"]=Va["[object Object]"]=Va["[object RegExp]"]=Va["[object Set]"]=Va["[object String]"]=Va["[object WeakMap]"]=!1;var za=function(e){return function(t){return e(t)}},Ga=t(function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="object"==r(t)&&t&&!t.nodeType&&t,o=n&&"object"==r(e)&&e&&!e.nodeType&&e,a=o&&o.exports===n&&zr.process,i=function(){try{return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i}),qa=Ga&&Ga.isTypedArray,Ha=qa?za(qa):function(e){return Kn(e)&&Ba(e.length)&&!!Va[on(e)]},Ka=Object.prototype.hasOwnProperty,$a=function(e,t){var r=qn(e),n=!r&&Da(e),o=!r&&!n&&Ua(e),a=!r&&!n&&!o&&Ha(e),i=r||n||o||a,u=i?Ra(e.length,String):[],c=u.length;for(var s in e)!t&&!Ka.call(e,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Po(s,c))||u.push(s);return u},Ya=Object.prototype,Qa=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ya)},Za=function(e,t){return function(r){return e(t(r))}},Ja=Za(Object.keys,Object),Xa=Object.prototype.hasOwnProperty,ei=function(e){if(!Qa(e))return Ja(e);var t=[];for(var r in Object(e))Xa.call(e,r)&&"constructor"!=r&&t.push(r);return t},ti=function(e){return null!=e&&Ba(e.length)&&!pn(e)},ri=function(e){return ti(e)?$a(e):ei(e)},ni=function(e,t){return e&&ka(t,ri(t),e)},oi=function(e,t){for(var r=e.length;r--;)if(Ea(e[r][0],t))return r;return-1},ai=Array.prototype.splice;oe.prototype.clear=function(){this.__data__=[],this.size=0},oe.prototype.delete=function(e){var t=this.__data__,r=oi(t,e);return r>=0&&(r==t.length-1?t.pop():ai.call(t,r,1),--this.size,!0)},oe.prototype.get=function(e){var t=this.__data__,r=oi(t,e);return 0>r?void 0:t[r][1]},oe.prototype.has=function(e){return oi(this.__data__,e)>-1},oe.prototype.set=function(e,t){var r=this.__data__,n=oi(r,e);return 0>n?(++this.size,r.push([e,t])):r[n][1]=t,this};var ii=oe,ui=wn(Hr,"Map"),ci=wn(Object,"create"),si="__lodash_hash_undefined__",fi=Object.prototype.hasOwnProperty,li=Object.prototype.hasOwnProperty,pi="__lodash_hash_undefined__";ae.prototype.clear=function(){this.__data__=ci?ci(null):{},this.size=0},ae.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ae.prototype.get=function(e){var t=this.__data__;if(ci){var r=t[e];return r===si?void 0:r}return fi.call(t,e)?t[e]:void 0},ae.prototype.has=function(e){var t=this.__data__;return ci?void 0!==t[e]:li.call(t,e)},ae.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ci&&void 0===t?pi:t,this};var di=ae,hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi=function(e){var t=void 0===e?"undefined":hi(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},mi=function(e,t){var r=e.__data__;return yi(t)?r["string"==typeof t?"string":"hash"]:r.map};ie.prototype.clear=function(){this.size=0,this.__data__={hash:new di,map:new(ui||ii),string:new di}},ie.prototype.delete=function(e){var t=mi(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return mi(this,e).get(e)},ie.prototype.has=function(e){return mi(this,e).has(e)},ie.prototype.set=function(e,t){var r=mi(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var vi=ie,gi=200;ue.prototype.clear=function(){this.__data__=new ii,this.size=0},ue.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ue.prototype.get=function(e){return this.__data__.get(e)},ue.prototype.has=function(e){return this.__data__.has(e)},ue.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ii){var n=r.__data__;if(!ui||gi-1>n.length)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new vi(n)}return r.set(e,t),this.size=r.size,this};var bi=ue,xi=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},_i=Object.prototype.hasOwnProperty,wi=function(e){if(!un(e))return xi(e);var t=Qa(e),r=[];for(var n in e)("constructor"!=n||!t&&_i.call(e,n))&&r.push(n);return r},Si=function(e){return ti(e)?$a(e,!0):wi(e)},ji=function(e,t){return e&&ka(t,Si(t),e)},Ii=t(function(e,t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="object"==r(t)&&t&&!t.nodeType&&t,o=n&&"object"==r(e)&&e&&!e.nodeType&&e,a=o&&o.exports===n?Hr.Buffer:void 0,i=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=i?i(r):new e.constructor(r);return e.copy(n),n}}),Ai=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a},Ei=function(){return[]},Ti=Object.prototype.propertyIsEnumerable,Oi=Object.getOwnPropertySymbols,ki=Oi?function(e){return null==e?[]:(e=Object(e),Ai(Oi(e),function(t){return Ti.call(e,t)}))}:Ei,Ri=function(e,t){return ka(e,ki(e),t)},Pi=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Ci=Za(Object.getPrototypeOf,Object),Ni=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Pi(t,ki(e)),e=Ci(e);return t}:Ei,Li=function(e,t){return ka(e,Ni(e),t)},Mi=function(e,t,r){var n=t(e);return qn(e)?n:Pi(n,r(e))},Di=function(e){return Mi(e,ri,ki)},Wi=function(e){return Mi(e,Si,Ni)},Ui=wn(Hr,"DataView"),Fi=wn(Hr,"Promise"),Bi=wn(Hr,"Set"),Vi=vn(Ui),zi=vn(ui),Gi=vn(Fi),qi=vn(Bi),Hi=vn(Sn),Ki=on;(Ui&&"[object DataView]"!=Ki(new Ui(new ArrayBuffer(1)))||ui&&"[object Map]"!=Ki(new ui)||Fi&&"[object Promise]"!=Ki(Fi.resolve())||Bi&&"[object Set]"!=Ki(new Bi)||Sn&&"[object WeakMap]"!=Ki(new Sn))&&(Ki=function(e){var t=on(e),r="[object Object]"==t?e.constructor:void 0,n=r?vn(r):"";if(n)switch(n){case Vi:return"[object DataView]";case zi:return"[object Map]";case Gi:return"[object Promise]";case qi:return"[object Set]";case Hi:return"[object WeakMap]"}return t});var $i=Ki,Yi=Object.prototype.hasOwnProperty,Qi=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&Yi.call(e,"index")&&(r.index=e.index,r.input=e.input),r},Zi=Hr.Uint8Array,Ji=function(e){var t=new e.constructor(e.byteLength);return new Zi(t).set(new Zi(e)),t},Xi=function(e,t){var r=t?Ji(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},eu=function(e,t){return e.set(t[0],t[1]),e},tu=function(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r},ru=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},nu=1,ou=function(e,t,r){var n=t?r(ru(e),nu):ru(e);return tu(n,eu,new e.constructor)},au=/\w*$/,iu=function(e){var t=new e.constructor(e.source,au.exec(e));return t.lastIndex=e.lastIndex,t},uu=function(e,t){return e.add(t),e},cu=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},su=1,fu=function(e,t,r){var n=t?r(cu(e),su):cu(e);return tu(n,uu,new e.constructor)},lu=Kr?Kr.prototype:void 0,pu=lu?lu.valueOf:void 0,du=function(e){return pu?Object(pu.call(e)):{}},hu=function(e,t){var r=t?Ji(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},yu="[object Boolean]",mu="[object Date]",vu="[object Map]",gu="[object Number]",bu="[object RegExp]",xu="[object Set]",_u="[object String]",wu="[object Symbol]",Su="[object ArrayBuffer]",ju="[object DataView]",Iu="[object Float32Array]",Au="[object Float64Array]",Eu="[object Int8Array]",Tu="[object Int16Array]",Ou="[object Int32Array]",ku="[object Uint8Array]",Ru="[object Uint8ClampedArray]",Pu="[object Uint16Array]",Cu="[object Uint32Array]",Nu=function(e,t,r,n){var o=e.constructor;switch(t){case Su:return Ji(e);case yu:case mu:return new o(+e);case ju:return Xi(e,n);case Iu:case Au:case Eu:case Tu:case Ou:case ku:case Ru:case Pu:case Cu:return hu(e,n);case vu:return ou(e,n,r);case gu:case _u:return new o(e);case bu:return iu(e);case xu:return fu(e,n,r);case wu:return du(e)}},Lu=function(e){return"function"!=typeof e.constructor||Qa(e)?{}:En(Ci(e))},Mu=1,Du=2,Wu=4,Uu="[object Arguments]",Fu="[object Function]",Bu="[object GeneratorFunction]",Vu="[object Object]",zu={};zu[Uu]=zu["[object Array]"]=zu["[object ArrayBuffer]"]=zu["[object DataView]"]=zu["[object Boolean]"]=zu["[object Date]"]=zu["[object Float32Array]"]=zu["[object Float64Array]"]=zu["[object Int8Array]"]=zu["[object Int16Array]"]=zu["[object Int32Array]"]=zu["[object Map]"]=zu["[object Number]"]=zu[Vu]=zu["[object RegExp]"]=zu["[object Set]"]=zu["[object String]"]=zu["[object Symbol]"]=zu["[object Uint8Array]"]=zu["[object Uint8ClampedArray]"]=zu["[object Uint16Array]"]=zu["[object Uint32Array]"]=!0,zu["[object Error]"]=zu[Fu]=zu["[object WeakMap]"]=!1;var Gu=ce,qu=4,Hu=8;se.placeholder={};var Ku=se,$u="__lodash_hash_undefined__";fe.prototype.add=fe.prototype.push=function(e){return this.__data__.set(e,$u),this},fe.prototype.has=function(e){return this.__data__.has(e)};var Yu=fe,Qu=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},Zu=function(e,t){return e.has(t)},Ju=1,Xu=2,ec=function(e,t,r,n,o,a){var i=r&Ju,u=e.length,c=t.length;if(!(u==c||i&&c>u))return!1;var s=a.get(e);if(s&&a.get(t))return s==t;var f=-1,l=!0,p=r&Xu?new Yu:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var d=e[f],h=t[f];if(n)var y=i?n(h,d,f,t,e,a):n(d,h,f,e,t,a);if(void 0!==y){if(y)continue;l=!1;break}if(p){if(!Qu(t,function(e,t){if(!Zu(p,t)&&(d===e||o(d,e,r,n,a)))return p.push(t)})){l=!1;break}}else if(d!==h&&!o(d,h,r,n,a)){l=!1;break}}return a.delete(e),a.delete(t),l},tc=1,rc=2,nc="[object Boolean]",oc="[object Date]",ac="[object Error]",ic="[object Map]",uc="[object Number]",cc="[object RegExp]",sc="[object Set]",fc="[object String]",lc="[object Symbol]",pc="[object ArrayBuffer]",dc="[object DataView]",hc=Kr?Kr.prototype:void 0,yc=hc?hc.valueOf:void 0,mc=function(e,t,r,n,o,a,i){switch(r){case dc:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pc:return!(e.byteLength!=t.byteLength||!a(new Zi(e),new Zi(t)));case nc:case oc:case uc:return Ea(+e,+t);case ac:return e.name==t.name&&e.message==t.message;case cc:case fc:return e==t+"";case ic:var u=ru;case sc:if(u||(u=cu),e.size!=t.size&&!(n&tc))return!1;var c=i.get(e);if(c)return c==t;n|=rc,i.set(e,t);var s=ec(u(e),u(t),n,o,a,i);return i.delete(e),s;case lc:if(yc)return yc.call(e)==yc.call(t)}return!1},vc=1,gc=Object.prototype.hasOwnProperty,bc=function(e,t,r,n,o,a){var i=r&vc,u=Di(e),c=u.length;if(c!=Di(t).length&&!i)return!1;for(var s=c;s--;){var f=u[s];if(!(i?f in t:gc.call(t,f)))return!1}var l=a.get(e);if(l&&a.get(t))return l==t;var p=!0;a.set(e,t),a.set(t,e);for(var d=i;++s<c;){var h=e[f=u[s]],y=t[f];if(n)var m=i?n(y,h,f,t,e,a):n(h,y,f,e,t,a);if(!(void 0===m?h===y||o(h,y,r,n,a):m)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var v=e.constructor,g=t.constructor;v!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g)&&(p=!1)}return a.delete(e),a.delete(t),p},xc=1,_c="[object Arguments]",wc="[object Array]",Sc="[object Object]",jc=Object.prototype.hasOwnProperty,Ic=function(e,t,r,n,o,a){var i=qn(e),u=qn(t),c=i?wc:$i(e),s=u?wc:$i(t),f=(c=c==_c?Sc:c)==Sc,l=(s=s==_c?Sc:s)==Sc,p=c==s;if(p&&Ua(e)){if(!Ua(t))return!1;i=!0,f=!1}if(p&&!f)return a||(a=new bi),i||Ha(e)?ec(e,t,r,n,o,a):mc(e,t,c,r,n,o,a);if(!(r&xc)){var d=f&&jc.call(e,"__wrapped__"),h=l&&jc.call(t,"__wrapped__");if(d||h){var y=d?e.value():e,m=h?t.value():t;return a||(a=new bi),o(y,m,r,n,a)}}return!!p&&(a||(a=new bi),bc(e,t,r,n,o,a))},Ac=le,Ec=1,Tc=2,Oc=function(e,t,r,n){var o=r.length,a=o,i=!n;if(null==e)return!a;for(e=Object(e);o--;){var u=r[o];if(i&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=r[o])[0],s=e[c],f=u[1];if(i&&u[2]){if(void 0===s&&!(c in e))return!1}else{var l=new bi;if(n)var p=n(s,f,c,e,t,l);if(!(void 0===p?Ac(f,s,Ec|Tc,n,l):p))return!1}}return!0},kc=function(e){return e==e&&!un(e)},Rc=function(e){for(var t=ri(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,kc(o)]}return t},Pc=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},Cc=function(e){var t=Rc(e);return 1==t.length&&t[0][2]?Pc(t[0][0],t[0][1]):function(r){return r===e||Oc(r,e,t)}},Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mc=/^\w*$/,Dc=function(e,t){if(qn(e))return!1;var r=void 0===e?"undefined":Nc(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!oa(e))||Mc.test(e)||!Lc.test(e)||null!=t&&e in Object(t)},Wc="Expected a function";pe.Cache=vi;var Uc=pe,Fc=500,Bc=/^\./,Vc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zc=/\\(\\)?/g,Gc=function(e){var t=Uc(e,function(e){return r.size===Fc&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return Bc.test(e)&&t.push(""),e.replace(Vc,function(e,r,n,o){t.push(n?o.replace(zc,"$1"):r||e)}),t}),qc=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},Hc=1/0,Kc=Kr?Kr.prototype:void 0,$c=Kc?Kc.toString:void 0,Yc=de,Qc=function(e){return null==e?"":Yc(e)},Zc=function(e,t){return qn(e)?e:Dc(e,t)?[e]:Gc(Qc(e))},Jc=1/0,Xc=function(e){if("string"==typeof e||oa(e))return e;var t=e+"";return"0"==t&&1/e==-Jc?"-0":t},es=function(e,t){for(var r=0,n=(t=Zc(t,e)).length;null!=e&&n>r;)e=e[Xc(t[r++])];return r&&r==n?e:void 0},ts=function(e,t,r){var n=null==e?void 0:es(e,t);return void 0===n?r:n},rs=function(e,t){return null!=e&&t in Object(e)},ns=function(e,t,r){for(var n=-1,o=(t=Zc(t,e)).length,a=!1;++n<o;){var i=Xc(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&Ba(o)&&Po(i,o)&&(qn(e)||Da(e))},os=function(e,t){return null!=e&&ns(e,t,rs)},as=1,is=2,us=function(e,t){return Dc(e)&&kc(t)?Pc(Xc(e),t):function(r){var n=ts(r,e);return void 0===n&&n===t?os(r,e):Ac(t,n,as|is)}},cs=function(e){return function(t){return null==t?void 0:t[e]}},ss=function(e){return function(t){return es(t,e)}},fs=function(e){return Dc(e)?cs(Xc(e)):ss(e)},ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ps=function(e){return"function"==typeof e?e:null==e?Br:"object"==(void 0===e?"undefined":ls(e))?qn(e)?us(e[0],e[1]):Cc(e):fs(e)},ds=1,hs=Kr?Kr.isConcatSpreadable:void 0,ys=function(e){return qn(e)||Da(e)||!!(hs&&e&&e[hs])},ms=he,vs=function(e){return(null==e?0:e.length)?ms(e,1):[]},gs=Math.max,bs=function(e,t,r){return t=gs(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=gs(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=n[o];return u[t]=r(i),Rn(e,this,u)}},xs=function(e){return lo(bs(e,void 0,vs),e+"")},_s=xs(function(e,t){return ja(e,256,void 0,void 0,void 0,t)}),ws={ary:function(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,ja(e,Ia,void 0,void 0,void 0,void 0,t)},assign:ni,clone:function(e){return Gu(e,qu)},curry:Ku,forEach:po,isArray:qn,isFunction:pn,iteratee:function(e){return ps("function"==typeof e?e:Gu(e,ds))},keys:ei,rearg:_s,toInteger:ya,toPath:function(e){return qn(e)?qc(e,Xc):oa(e)?[e]:$n(Gc(Qc(e)))}},Ss=function(e,t,r){return Fr(ws,e,t,r)},js=Ss("getOr",ts);js.placeholder=Wr;var Is=js,As=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},Es=function(e,t,r){var n=-1,o=e.length;0>t&&(t=-t>o?0:o+t),0>(r=r>o?o:r)&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a},Ts=function(e,t){return 2>t.length?e:es(e,Es(t,0,-1))},Os=function(e,t){return t=Zc(t,e),null==(e=Ts(e,t))||delete e[Xc(As(t))]},ks="[object Object]",Rs=Function.prototype.toString,Ps=Object.prototype.hasOwnProperty,Cs=Rs.call(Object),Ns=function(e){if(!Kn(e)||on(e)!=ks)return!1;var t=Ci(e);if(null===t)return!0;var r=Ps.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Rs.call(r)==Cs},Ls=function(e){return Ns(e)?void 0:e},Ms=Ss("omit",xs(function(e,t){var r={};if(null==e)return r;var n=!1;t=qc(t,function(t){return t=Zc(t,e),n||(n=t.length>1),t}),ka(e,Wi(e),r),n&&(r=Gu(r,7,Ls));for(var o=t.length;o--;)Os(r,t[o]);return r}));Ms.placeholder=Wr;var Ds=Ms,Ws=function(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),u=i.length;u--;){var c=i[e?u:++o];if(!1===r(a[c],c,a))break}return t}}(),Us=function(e,t){return e&&Ws(e,t,ri)},Fs=function(e,t){return function(r,n){if(null==r)return r;if(!ti(r))return e(r,n);for(var o=r.length,a=t?o:-1,i=Object(r);(t?a--:++a<o)&&!1!==n(i[a],a,i););return r}}(Us),Bs=function(e,t){var r=-1,n=ti(e)?Array(e.length):[];return Fs(e,function(e,o,a){n[++r]=t(e,o,a)}),n},Vs=Ss("map",function(e,t){return(qn(e)?qc:Bs)(e,ps(t,3))});Vs.placeholder=Wr;var zs=Vs,Gs=function(e,t){return qc(t,function(t){return e[t]})},qs={cap:!1,curry:!1,fixed:!1,immutable:!1,rearg:!1},Hs=Ss("values",function(e){return null==e?[]:Gs(e,ri(e))},qs);Hs.placeholder=Wr;var Ks=Hs,$s=function(e,t,r,n,o){return o(e,function(e,o,a){r=n?(n=!1,e):t(r,e,o,a)}),r};Ss("reduce",function(e,t,r){var n=qn(e)?tu:$s,o=3>arguments.length;return n(e,ps(t,4),r,o,Fs)}).placeholder=Wr;var Ys=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qs=function(e,t){var r=function(){return{type:e,payload:t.apply(void 0,arguments)}};return r.getActionName=function(){return e},r},Zs=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Js=function(e){var t;return t={},t["setProperty"+Zs(e)]=Qs("SET_PROPERTY_"+e.toUpperCase(),function(e){return{data:e}}),t["removeProperty"+Zs(e)]=Qs("REMOVE_PROPERTY_"+e.toUpperCase(),function(){return{propName:e}}),t},Xs={LICENSE:"license",GROUP:"group",SESSION_ID:"sessionId",SECURED_TOKEN:"securedToken",CHAT_ID:"chatId",CHAT_STATE:"chatState",CHAT_STATUS:"chatStatus",VISITOR_ID:"visitorId",CUSTOM_VISITOR_ID:"customVisitorId",LAST_MESSAGE_ID:"lastMessageId",CONNECTION_STATUS:"connectionStatus",VISITOR_DATA:"visitorData",SNEAK_PEEK:"sneakPeek",TICKET_FORM:"ticketForm",STATIC_CONFIG_VERSION:"staticConfigVersion"},ef=(Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e})({},Js(Xs.LICENSE),Js(Xs.GROUP),Js(Xs.SESSION_ID),Js(Xs.SECURED_TOKEN),Js(Xs.CHAT_ID),Js(Xs.CHAT_STATE),Js(Xs.VISITOR_ID),Js(Xs.CUSTOM_VISITOR_ID),Js(Xs.LAST_MESSAGE_ID),Js(Xs.CHAT_STATUS),Js(Xs.CONNECTION_STATUS),Js(Xs.VISITOR_DATA),Js(Xs.SNEAK_PEEK),Js(Xs.TICKET_FORM),Js(Xs.STATIC_CONFIG_VERSION)),tf="Expected a function",rf=8,nf=32,of=128,af=256,uf=Ss("flowRight",function(e){return xs(function(t){var r=t.length,n=r,o=Gn.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new TypeError(tf);if(o&&!i&&"wrapper"==zn(a))var i=new Gn([],!0)}for(n=i?n:r;++n<r;){var u=zn(a=t[n]),c="wrapper"==u?Fn(a):void 0;i=c&&Jn(c[0])&&c[1]==(of|rf|nf|af)&&!c[4].length&&1==c[9]?i[zn(c[0])].apply(i,c[3]):1==a.length&&Jn(a)?i[u]():i.thru(a)}return function(){var e=arguments,n=e[0];if(i&&1==e.length&&qn(n))return i.plant(n).value();for(var o=0,a=r?t[o].apply(this,e):n;++o<r;)a=t[o].call(this,a);return a}})}(!0));uf.placeholder=Wr;var cf=uf,sf=function(e,t,r){(void 0===r||Ea(e[t],r))&&(void 0!==r||t in e)||Aa(e,t,r)},ff=function(e){return Kn(e)&&ti(e)},lf=function(e){return ka(e,Si(e))},pf=function(e,t,r,n,o,a,i){var u=e[r],c=t[r],s=i.get(c);if(s)sf(e,r,s);else{var f=a?a(u,c,r+"",e,t,i):void 0,l=void 0===f;if(l){var p=qn(c),d=!p&&Ua(c),h=!p&&!d&&Ha(c);f=c,p||d||h?qn(u)?f=u:ff(u)?f=$n(u):d?(l=!1,f=Ii(c,!0)):h?(l=!1,f=hu(c,!0)):f=[]:Ns(c)||Da(c)?(f=u,Da(u)?f=lf(u):(!un(u)||n&&pn(u))&&(f=Lu(c))):l=!1}l&&(i.set(c,f),o(f,c,n,a,i),i.delete(c)),sf(e,r,f)}},df=ye,hf=function(e,t){return lo(bs(e,t,Br),e+"")},yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf=function(e,t,r){if(!un(r))return!1;var n=void 0===t?"undefined":yf(t);return!!("number"==n?ti(r)&&Po(t,r.length):"string"==n&&t in r)&&Ea(r[t],e)},vf=function(e){return hf(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,i&&mf(r[0],r[1],i)&&(a=3>o?void 0:a,o=1),t=Object(t);++n<o;){var u=r[n];u&&e(t,u,n,a)}return t})}(function(e,t,r){df(e,t,r)}),gf=Ss("mergeAll",vf);gf.placeholder=Wr;var bf=gf,xf=cf(bf,zs(function(e){var t;return t={},t["SET_PROPERTY_"+e.toUpperCase()]=function(t,r){var n;return Ys({},t,(n={},n[e]=r.data,n))},t["REMOVE_PROPERTY_"+e.toUpperCase()]=function(t){return Ys({},Ds(e,t))},t}),Ks)(Xs),_f=cf(bf,zs(function(e){var t;return t={},t["getProperty"+Zs(e)]=function(t){return t[e]},t}),Ks)(Xs),wf=function(e){return e.environment},Sf=function(e,t){return function(r,n,o){var a=r||e;return t.hasOwnProperty(n.type)?t[n.type](a,n.payload,o):a}}({},xf),jf="runSaga(storeInterface, saga, ...args): saga argument must be a Generator function!",If=function(){function e(t){var r=t.getState,n=t.dispatch,s=g();return s.emit=(a.emitter||gt)(s.emit),e.run=me.bind(null,{context:o,subscribe:s.subscribe,dispatch:n,getState:r,sagaMonitor:i,logger:u,onError:c}),function(e){return function(t){i&&i.actionDispatched&&i.actionDispatched(t);var r=e(t);return s.emit(t),r}}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.context,o=void 0===n?{}:n,a=ve(t,["context"]),i=a.sagaMonitor,u=a.logger,c=a.onError;if(xt.func(a))throw Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(u&&!xt.func(u))throw Error("`options.logger` passed to the Saga middleware is not a function!");if(c&&!xt.func(c))throw Error("`options.onError` passed to the Saga middleware is not a function!");if(a.emitter&&!xt.func(a.emitter))throw Error("`options.emitter` passed to the Saga middleware is not a function!");return e.run=function(){throw Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},e.setContext=function(e){r(e,xt.object,Tt("sagaMiddleware",e)),_t.assign(o,e)},e}(),Af=H(function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return function(e){return function(r,n,o){var a=e(r,n,o),i=a.dispatch,u=[],c={getState:a.getState,dispatch:function(e){return i(e)}};return u=t.map(function(e){return e(c)}),i=H.apply(void 0,u)(a.dispatch),Mr({},a,{dispatch:i})}}}(If),window.devToolsExtension?window.devToolsExtension():function(e){return e})(q),Ef=function(e){var t=Af(Sf,e);return t.runSaga=If.run,t},Tf=Qs("PUBLIC_SEND_MESSAGE",function(e){return{customId:e.customId,text:e.text,promise:e.promise}}),Of=(Qs("PUBLIC_INIT",function(e){return{license:e.license,group:e.group}}),Qs("SET_VISITOR_DATA",function(e){return{name:e.name,email:e.email,customProperties:e.customProperties,pageUrl:e.pageUrl,pageTitle:e.pageTitle,promise:e.promise}})),kf=Qs("GET_VISITOR_DATA",function(e){return{promise:e.promise}}),Rf=(Qs("PUBLIC_CALLBACK_ERROR",function(e){return{errorMessage:e.errorMessage}}),Qs("PUBLIC_RATE_CHAT",function(e){return{rate:e.rate,comment:e.comment,promise:e.promise}})),Pf=Qs("PUBLIC_SET_SNEAK_PEEK",function(e){return{text:e.text,promise:e.promise}}),Cf=Qs("PUBLIC_FORWARD_CHAT_TRANSCRIPT",function(e){return{email:e.email,promise:e.promise}}),Nf=Qs("PUBLIC_CLOSE_CHAT",function(e){return{promise:e.promise}}),Lf=Qs("PUBLIC_DISCONNECT",function(e){return{promise:e.promise}}),Mf=Qs("PUBLIC_GET_TICKET_FORM",function(e){return{promise:e.promise}}),Df=Qs("PUBLIC_SEND_TICKET_FORM",function(e){return{name:e.name,email:e.email,subject:e.subject,message:e.message,promise:e.promise}}),Wf=regeneratorRuntime.mark(ge),Uf=function(e){return O(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}},t,this,[[0,6]])}))},Ff=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},Bf=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,a=oa(e),i=void 0!==t,u=null===t,c=t==t,s=oa(t);if(!u&&!s&&!a&&e>t||a&&i&&c&&!u&&!s||n&&i&&c||!r&&c||!o)return 1;if(!n&&!a&&!s&&t>e||s&&r&&o&&!n&&!a||u&&r&&o||!i&&o||!c)return-1}return 0},Vf=function(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,i=o.length,u=r.length;++n<i;){var c=Bf(o[n],a[n]);if(c)return u>n?c*("desc"==r[n]?-1:1):c}return e.index-t.index},zf=function(e,t,r){var n=-1;t=qc(t.length?t:[Br],za(ps));var o=Bs(e,function(e,r,o){return{criteria:qc(t,function(t){return t(e)}),index:++n,value:e}});return Ff(o,function(e,t){return Vf(e,t,r)})},Gf=Ss("sortBy",hf(function(e,t){if(null==e)return[];var r=t.length;return r>1&&mf(e,t[0],t[1])?t=[]:r>2&&mf(t[0],t[1],t[2])&&(t=[t[0]]),zf(e,ms(t,1),[])}));Gf.placeholder=Wr;var qf=Gf,Hf=Ss("fromPairs",function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n});Hf.placeholder=Wr;var Kf=Hf,$f=function(e,t,r){var n=e.length;return r=void 0===r?n:r,t||n>r?Es(e,t,r):e},Yf=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Qf=function(e){return Yf.test(e)},Zf="[object RegExp]",Jf=Ga&&Ga.isRegExp,Xf=Jf?za(Jf):function(e){return Kn(e)&&on(e)==Zf},el=function(e){return e.split("")},tl="[\\ud800-\\udfff]",rl="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",nl="\\ud83c[\\udffb-\\udfff]",ol="[^\\ud800-\\udfff]",al="(?:\\ud83c[\\udde6-\\uddff]){2}",il="[\\ud800-\\udbff][\\udc00-\\udfff]",ul="(?:"+rl+"|"+nl+")"+"?",cl="[\\ufe0e\\ufe0f]?"+ul+("(?:\\u200d(?:"+[ol,al,il].join("|")+")[\\ufe0e\\ufe0f]?"+ul+")*"),sl="(?:"+[ol+rl+"?",rl,al,il,tl].join("|")+")",fl=RegExp(nl+"(?="+nl+")|"+sl+cl,"g"),ll=function(e){return e.match(fl)||[]},pl=function(e){return Qf(e)?ll(e):el(e)},dl=4294967295,hl=Ss("split",function(e,t,r){return r&&"number"!=typeof r&&mf(e,t,r)&&(t=r=void 0),(r=void 0===r?dl:r>>>0)?(e=Qc(e))&&("string"==typeof t||null!=t&&!Xf(t))&&!(t=Yc(t))&&Qf(e)?$f(pl(e),0,r):e.split(t,r):[]});hl.placeholder=Wr;var yl=hl,ml=hf(function(e,t){var r=Mo(t,Oo(ml));return ja(e,64,void 0,t,r)});ml.placeholder={};var vl=Ss("partialRight",ml);vl.placeholder=Wr;var gl=vl,bl=function(e,t){for(var r=-1,n=e.length;++r<n&&vo(t,e[r],0)>-1;);return r},xl=/^\s+/,_l=Ss("trimStart",function(e,t,r){if((e=Qc(e))&&(r||void 0===t))return e.replace(xl,"");if(!e||!(t=Yc(t)))return e;var n=pl(e),o=bl(n,pl(t));return $f(n,o).join("")});_l.placeholder=Wr;var wl,Sl,jl=_l,Il="function"==typeof fetch?fetch:function(e,t){return t=t||{},new Promise(function(r,n){function o(){var e,t=[],r=[],n={};return a.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(o,a,i){t.push(a=a.toLowerCase()),r.push([a,i]),n[a]=(e=n[a])?e+","+i:i}),{ok:1==(a.status/200|0),status:a.status,statusText:a.statusText,url:a.responseURL,clone:o,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(a.responseXML)},blob:function(){return Promise.resolve(new Blob([a.response]))},headers:{keys:function(){return t},entries:function(){return r},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}var a=new XMLHttpRequest;a.open(t.method||"get",e);for(var i in t.headers)a.setRequestHeader(i,t.headers[i]);a.withCredentials="include"==t.credentials,a.onload=function(){r(o())},a.onerror=n,a.send(t.body)})},Al=(wl={},wl.labs="https://secure-labs.livechatinc.com",wl.staging="https://secure-lc.livechatinc.com",wl.production="https://secure.livechatinc.com",wl),El=(Sl={},Sl.labs="https://api.labs.livechatinc.com",Sl.staging="https://api.staging.livechatinc.com",Sl.production="https://api.livechatinc.com",Sl),Tl=function(e,t){return 1520===t?Al.staging:Al[e]},Ol=function(e,t){return 1520===t?El.staging:El[e]},kl=function(e){for(var t="",r="0123456789abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ",n=0;e>n;n++)t+=r.substr(Math.floor(64*Math.random()),1);return t},Rl=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.attempts||3,o=r.retryDelay||1e3;return new Promise(function(r,a){!function i(){Il(e,t).then(function(e){return r(e)}).catch(function(e){return n?(--n,setTimeout(function(){i()},o)):a(e)})}()})},Pl=function(e,t,r){var n=t.body,o=Ol(t.environment,t.license)+"/"+e;return Rl(o,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)},r).then(function(e){return e.json()})},Cl=function(e,t,r){var n=t.environment,o=t.license,a=t.body,i=t.securedToken,u="status_ping"===e||-1!==e.indexOf("get_static_config")?"v2/":"",c=Tl(n,o)+"/licence/external/"+o+"/"+u+e;return i&&(c+="?secret_token="+i),Rl(c,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)},r).then(function(e){return e.json()})},Nl=function(e,t,r,n){var o=Tl(e,t)+"/licence/external/"+t+"/tunnel_callback.cgi?"+kl(20);return n&&(o+="&secret_token="+n),o+="&command="+encodeURI(r),Rl(o,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.text()}).then(function(e){return e.split("^")})},Ll=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ml=regeneratorRuntime.mark(be),Dl=regeneratorRuntime.mark(xe),Wl=regeneratorRuntime.mark(_e),Ul=cf(Kf,zs(cf(zs(decodeURIComponent),yl("="))),yl("&"),gl(jl.convert({fixed:!1}),["?"])),Fl=function(e){return Cl("get_dynamic_config.js",Ll({},e,{body:{}}))},Bl=function(e,t){return Cl("get_static_config."+t.group+"."+e+".js",Ll({},t,{body:{}}))},Vl=Qs("CHAT_STARTED",function(e){return{securedToken:e.securedToken}}),zl=Qs("NEW_MESSAGE",function(e){return{id:e.id,timestamp:e.timestamp,authorType:e.authorType,authorId:e.authorId,text:e.text,chatId:e.chatId,isMobile:e.isMobile,customId:e.customId}}),Gl=Qs("CHAT_ENDED",function(){return null}),ql=Qs("NEW_AGENT",function(e){return{avatarUrl:e.avatarUrl,jobTitle:e.jobTitle,name:e.name,id:e.id}}),Hl=Qs("VISITOR_DATA_SET",function(e){return e}),Kl=Qs("NEW_FILE",function(e){return{id:e.id,timestamp:e.timestamp,authorType:e.authorType,authorId:e.authorId,url:e.url,size:e.size,contentType:e.contentType}}),$l=Qs("VISITOR_QUEUED",function(e){return{numberInQueue:e.numberInQueue,waitingTime:e.waitingTime}}),Yl=Qs("TYPING_INDICATOR",function(e){return{authorId:e.authorId,isTyping:e.isTyping}}),Ql=Qs("RATE_CHAT",function(e){return{rate:e.rate,comment:e.comment}}),Zl=function(e){return Object.keys(e).map(function(t){return{name:t,value:e[t]}})},Jl=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xl=regeneratorRuntime.mark(we),ep=function(e,t,r,n){var o={visitor:{id:t,group:r}};return e&&(o.page={title:n.pageTitle,url:n.pageUrl}),e&&n.email&&(o.visitor.email=n.email),e&&n.name&&(o.visitor.name=n.name),e&&n.customProperties&&(o.visitor.custom_variables=Zl(n.customProperties)),o},tp=regeneratorRuntime.mark(Se),rp=function(e){return e.agent_available?"ONLINE":"OFFLINE"},np=regeneratorRuntime.mark(je),op="",ap=function(){var e={};return{setItem:function(t,r){e[t]=r},getItem:function(t){return e[t]},removeItem:function(t){delete e[t]}}}(),ip=window&&window.localStorage?window.localStorage:ap,up={setItem:function(e,t){ip.setItem(op+e,t)},getItem:function(e){return ip.getItem(op+e)},removeItem:function(e){ip.removeItem(op+e)},setPrefix:function(e){op=e}},cp="CHATTING",sp="NOT_CHATTING",fp=regeneratorRuntime.mark(Ie),lp=regeneratorRuntime.mark(Ae),pp=Ss("get",ts);pp.placeholder=Wr;var dp=pp,hp=Ss("isNil",function(e){return null==e},qs);hp.placeholder=Wr;var yp=hp,mp="Expected a function",vp=function(e){if("function"!=typeof e)throw new TypeError(mp);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}},gp=function(e,t,r,n){if(!un(e))return e;for(var o=-1,a=(t=Zc(t,e)).length,i=a-1,u=e;null!=u&&++o<a;){var c=Xc(t[o]),s=r;if(o!=i){var f=u[c];void 0===(s=n?n(f,c,u):void 0)&&(s=un(f)?f:Po(t[o+1])?[]:{})}Oa(u,c,s),u=u[c]}return e},bp=function(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],u=es(e,i);r(u,i)&&gp(a,Zc(i,e),u)}return a},xp=function(e,t){if(null==e)return{};var r=qc(Wi(e),function(e){return[e]});return t=ps(t),bp(e,r,function(e,r){return t(e,r[0])})},_p=Ss("omitBy",function(e,t){return xp(e,vp(ps(t)))});_p.placeholder=Wr;var wp=_p,Sp=Ss("merge",vf);Sp.placeholder=Wr;var jp=Sp,Ip=function(e,t){return bp(e,t,function(t,r){return os(e,r)})},Ap=Ss("pick",xs(function(e,t){return null==e?{}:Ip(e,t)}));Ap.placeholder=Wr;var Ep=Ap,Tp=Ss("identity",Br,qs);Tp.placeholder=Wr;var Op=Tp,kp=function(e,t,r){var n;return r(e,function(e,r,o){if(t(e,r,o))return n=r,!1}),n},Rp=Ss("findKey",function(e,t){return kp(e,ps(t,3),Us)});Rp.placeholder=Wr;var Pp,Cp=Rp,Np=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lp=function(e){return e.replace(/[\x01-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"")},Mp=function(e){return"1"===e},Dp=(Pp={},Pp.none="0",Pp.bad="1",Pp.good="2",Pp),Wp={NEW_AGENT:"newAgent",NEW_AGENT_MESSAGE:"newAgentMessage",CHAT_ENDED:"chatEnded",VISITOR_QUEUED:"visitorQueued",TYPING_INDICATOR:"typingIndicator",RATE_CHAT:"rateChat",FORWARD_CHAT_TRANSCRIPT:"forwardChatTranscript"},Up={IWCS0002R:[Wp.NEW_AGENT,{1:["id"],2:["name"],12:["chatId"],23:["avatarUrl"],25:["jobTitle"]}],IWCS0006R:[Wp.NEW_AGENT_MESSAGE,{1:["authorId"],2:["message"],9:["isMobile",Mp],10:["id"]}],IWCS1007S:[Wp.CHAT_ENDED,null],IWCS1002S:[Wp.VISITOR_QUEUED,{2:["numberInQueue",parseInt],3:["waitingTime",parseInt]}],IWCS0002P:[Wp.TYPING_INDICATOR,{2:["realCommand",function(e){var t=e.split("&#45;");return{authorId:t[1],isTyping:Mp(t[2])}}]}],IWCS0113C:[Wp.RATE_CHAT,{1:["visitorId"],2:["chatId"],3:["rate",function(e){return Dp[e]}]}],IWCS0069C:[Wp.FORWARD_CHAT_TRANSCRIPT,{1:["visitorId"],2:["email"],5:["chatId"]}]},Fp=function(e){var t=e.split("^"),r=t[0],n=t.slice(1),o=Up[r];if(!o)return null;var a=o[1];return{name:o[0],data:n.reduce(function(e,t,r){if(!a||!a[r+1])return e;var n=a[r+1],o=n[0],i=n[1],u=void 0===i?Op:i;return"realCommand"===o?Np({},e,u(t)):(e[o]=u(t),e)},{})}},Bp=function(e,t){for(var r=Cp(function(t){return t[0]===e},Up),n=Up[r][1],o=Math.max.apply(Math,Object.keys(n)),a=[r];o+1>a.length;){var i=n[a.length];if(i){var u=Lp(t[i[0]]).replace(/\^/g,"&#94;");a.push(i[1]?i[1](u):u)}else a.push("")}return a.join("^")+"^"},Vp=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zp=regeneratorRuntime.mark(Ee),Gp=regeneratorRuntime.mark(Te),qp=regeneratorRuntime.mark(Oe),Hp=regeneratorRuntime.mark(ke),Kp=regeneratorRuntime.mark(Re),$p=regeneratorRuntime.mark(Pe),Yp=regeneratorRuntime.mark(Ce),Qp=regeneratorRuntime.mark(Ne),Zp=regeneratorRuntime.mark(Le),Jp=regeneratorRuntime.mark(Me),Xp=regeneratorRuntime.mark(De),ed=Tf,td=Of,rd=kf,nd=Rf,od=Pf,ad=Cf,id=Nf,ud=Lf,cd=Mf,sd=Df,fd="chat_started",ld="new_message",pd="chat_ended",dd="agent_changed",hd="status_changed",yd="connection_status_changed",md="new_file",vd="visitor_queued",gd="typing_indicator",bd="visitor_data",xd=regeneratorRuntime.mark(We),_d=regeneratorRuntime.mark(Be),wd=regeneratorRuntime.mark(Ve),Sd=regeneratorRuntime.mark(He),jd=regeneratorRuntime.mark(Ke),Id=Qs("INCOMING_MESSAGE",function(e){return{name:e.name,message:e.message}}),Ad=Ss("mapKeys",function(e,t){var r={};return t=ps(t,3),Us(e,function(e,n,o){Aa(r,t(e,n,o),e)}),r});Ad.placeholder=Wr;var Ed=Ad,Td=function(e){return function(t){t=Qc(t);var r=Qf(t)?pl(t):void 0,n=r?r[0]:t.charAt(0),o=r?$f(r,1).join(""):t.slice(1);return n[e]()+o}}("toUpperCase"),Od=function(e){return Td(Qc(e).toLowerCase())},kd=function(e){return function(t){return null==e?void 0:e[t]}}({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Rd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pd=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Cd=function(e){return(e=Qc(e))&&e.replace(Rd,kd).replace(Pd,"")},Nd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ld=function(e){return e.match(Nd)||[]},Md=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dd=function(e){return Md.test(e)},Wd="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ud="["+Wd+"]",Fd="\\d+",Bd="[\\u2700-\\u27bf]",Vd="[a-z\\xdf-\\xf6\\xf8-\\xff]",zd="[^\\ud800-\\udfff"+Wd+Fd+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Gd="(?:\\ud83c[\\udde6-\\uddff]){2}",qd="[\\ud800-\\udbff][\\udc00-\\udfff]",Hd="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Kd="(?:"+Vd+"|"+zd+")",$d="(?:"+Hd+"|"+zd+")",Yd="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Qd="[\\ufe0e\\ufe0f]?"+Yd+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Gd,qd].join("|")+")[\\ufe0e\\ufe0f]?"+Yd+")*"),Zd="(?:"+[Bd,Gd,qd].join("|")+")"+Qd,Jd=RegExp([Hd+"?"+Vd+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[Ud,Hd,"$"].join("|")+")",$d+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[Ud,Hd+Kd,"$"].join("|")+")",Hd+"?"+Kd+"+(?:['](?:d|ll|m|re|s|t|ve))?",Hd+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Fd,Zd].join("|"),"g"),Xd=function(e){return e.match(Jd)||[]},eh=function(e,t,r){return e=Qc(e),void 0===(t=r?void 0:t)?Dd(e)?Xd(e):Ld(e):e.match(t)||[]},th=RegExp("[']","g"),rh=Ss("camelCase",function(e){return function(t){return tu(eh(Cd(t).replace(th,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?Od(t):t)}),qs);rh.placeholder=Wr;var nh=rh,oh=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ah=regeneratorRuntime.mark($e),ih=regeneratorRuntime.mark(Ye),uh=regeneratorRuntime.mark(Qe),ch=regeneratorRuntime.mark(Ze),sh=regeneratorRuntime.mark(Je),fh="",lh=function(e){return dp("message.data",e)&&(e.message.data=Ed(nh,e.message.data)),dp("message.name",e)&&(e.message.name=nh(e.message.name)),oh({timestamp:e.timestamp,uniqueId:e.unique_id},e.message)},ph=function(e){return Math.max.apply(Math,[0].concat(e.map(function(e){return e.unique_id})))},dh=function(e){return e.messages.map(function(e){if(e.message_iwcs){var t=Fp(e.message_iwcs);return!!t&&{timestamp:e.timestamp,unique_id:e.unique_id,message:t}}return e}).map(lh).filter(Boolean)},hh="sendMessage",yh="startChat",mh="chatAttachment",vh=regeneratorRuntime.mark(Xe),gh=regeneratorRuntime.mark(et),bh=regeneratorRuntime.mark(tt),xh=regeneratorRuntime.mark(rt),_h=[Tf,Of].map(function(e){return e.getActionName()}),wh="undefined"!=typeof document,Sh=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.text,n=t.customId,o=a();return r&&n?(e.dispatch(Tf({customId:n,text:r,promise:o})),o.promise):(o.reject({type:"missing argument",reason:"Missing text or customId parameter"}),o.promise)}},jh=function(e){return function(t){var r=t.text,n=a();return e.dispatch(Pf({text:r,promise:n})),n.promise}},Ih=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.rate,n=t.comment,o=a();return r?"good"!==r&&"none"!==r&&"bad"!==r?(o.reject({type:"wrong argument",reason:'Rate argument should be equal "good", "bad" or "none"'}),o.promise):(e.dispatch(Rf({rate:r,comment:n,promise:o})),o.promise):(o.reject({type:"missing argument",reason:"Missing rate parameter"}),o.promise)}},Ah=function(e){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).email,r=a();return t?(e.dispatch(Cf({email:t,promise:r})),r.promise):(r.reject({type:"missing argument",reason:"Missing email parameter"}),r.promise)}},Eh=function(e){return function(){var t=a();return e.dispatch(Nf({promise:t})),t.promise}},Th=function(e){return function(){var t=a();return e.dispatch(Lf({promise:t})),t.promise}},Oh=function(e,t){return function(){t.off("*"),e.cancel()}},kh=function(e){return function(){var t=a();return e.dispatch(Mf({promise:t})),t.promise}},Rh=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,n=t.email,o=t.subject,i=t.message,u=a();return n?i?(e.dispatch(Df({name:r,email:n,subject:o,message:i,promise:u})),u.promise):(u.reject({type:"missing argument",reason:"Missing message"}),u.promise):(u.reject({type:"missing argument",reason:"Missing email"}),u.promise)}},Ph=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,n=t.email,o=t.customProperties,i=t.pageUrl,u=t.pageTitle,c=a();return r||n||o||i||u?(e.dispatch(Of({name:r,email:n,customProperties:o,pageUrl:i,pageTitle:u,promise:c})),c.promise):(c.reject({type:"missing argument",reason:"Missing name, email, url or customProperties"}),c.promise)}},Ch=function(e){return function(){var t=a();return e.dispatch(kf({promise:t})),t.promise}};e.init=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.license,n=t.group,o=void 0===n?0:n,a=t.environment,i=void 0===a?"production":a,u=new nt;if(!r)throw Error("Missing license parameter");if("production"!==i&&"labs"!==i&&"staging"!==i)throw Error("Wrong environment parameter");var c=Math.random()+"",s=(e={environment:i},e[Xs.LICENSE]=r,e[Xs.GROUP]=o,e[Xs.SESSION_ID]=c,e[Xs.VISITOR_DATA]={pageUrl:Is("unknown","location.href",wh&&document),pageTitle:Is("unknown","[0].innerHTML",wh&&document.getElementsByTagName("title")||{})},e),f=Ef(s);up.setPrefix("_livechat_"+r);var l=up.getItem("securedToken"),p=f.runSaga(rt,{emitter:u});return l&&f.dispatch(ef.setPropertySecuredToken(l)),{sendMessage:Sh(f),setSneakPeek:jh(f),setVisitorData:Ph(f),getVisitorData:Ch(f),rateChat:Ih(f),forwardChatTranscript:Ah(f),closeChat:Eh(f),disconnect:Th(f),getTicketForm:kh(f),sendTicketForm:Rh(f),on:u.on,destroy:Oh(p,u)}},Object.defineProperty(e,"__esModule",{value:!0})});
